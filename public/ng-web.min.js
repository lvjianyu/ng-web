!function(t){"use strict";var e=["ui.router","ui.bootstrap","platform","authentication","ngWeb","ngMessage","angular-loading-bar"],n=t.module("app",e);n.config(["cfpLoadingBarProvider",function(t){t.includeSpinner=!1}]),n.config(["$provide",function(t){t.decorator("$templateCache",["$http","$delegate","$injector",function(t,e,n){return e.loadedTemplateUrl=function(e){t({url:e,method:"GET"}).then(function(t){n.get("$compile")(t.data)})},e}])}]),n.run(["$templateCache","$http","$compile",function(t){t.loadedTemplateUrl("/template/ng-template.html")}])}(angular);
!function(n){"use strict";var t=n.module("authentication",[]);window.authentication=window.authentication||{tokenKey:"authentication.key.edu.online",authRequire:"",authSuccess:"",loginSuccess:"",loginFailed:""},t.provider("tokenAuth",function(){this.$get=["$injector","$q",function(){function n(){}var t;return window.localStorage&&(t=window.localStorage),{checkTokenAuth:n}}]}),t.factory("tokenAuthHttpInterceptor",["$rootScope","$q","tokenAuth",function(n,t,e){var o={request:function(n){return n},response:function(n){return n},requestError:function(n){return n},responseError:function(n){return n}};return o}]),t.config(function(){})}(angular);
!function(i){"use strict";i.module("ngWeb",[]).value("topicItemSource",[{topic:"Javascript",liStyle:"bg_lg span3",uiSref:"javascript",iStyle:"icon-signal",spanStyle:"label label-success"},{topic:"Angularjs",liStyle:"bg_lb",uiSref:"angularjs",iStyle:"icon-dashboard",spanStyle:"label label-success"},{topic:"NodeJS",liStyle:"bg_ly span2",uiSref:"nodejs",iStyle:"icon-inbox",spanStyle:"label label-success"},{topic:"C#",liStyle:"bg_lo span3",uiSref:"csharp",iStyle:"icon-th",spanStyle:"label label-success"},{topic:"MongoDB",liStyle:"bg_ls",uiSref:"mongodb",iStyle:"icon-fullscreen",spanStyle:"label label-success"},{topic:"SQL",liStyle:"bg_lo",uiSref:"sql",iStyle:"icon-th-list",spanStyle:"label label-success"}]).run(["$templateCache",function(i){var a='<div style="height: 81px">   <div id="user-nav" class="navbar navbar-inverse">       <ul class="nav">           <li>               <a href>                   <i class="icon icon-user"></i>                   <span class="text">welcome</span>               </a>           </li>           <li>               <a href ng-click="login()">                   <i class="icon icon-key"></i>                   <span class="text">Login</span>               </a>           </li>       </ul>   </div></div>',e='<div class="row-fluid">   <div id="footer" class="span12">        2014-2015 &copy;Web design by        <a href="https://github.com/microlv/" target="_blank">[microlv]</a>       fork me on github:       <a href="https://github.com/microlv/" target="_blank">[microlv]</a>   </div></div>',l='<div id="sidebar">   <a class="visible-phone" href ui-sref="topic">       <i class="icon icon-home"></i> Dashboard   </a>   <ul>      <li data-ng-repeat="item in layoutSidebarItemSource">          <a data-ng-href="{{item.href}}">              <i class="icon" data-ng-class="item.iStyle"></i>              <span> {{item.topic}}</span>          </a>      </li>   </ul></div>',t='<div id="content">   <div id="content-header">       <div id="breadcrumb">           <a ui-sref="index" title="Go to Home" class="tip-bottom">           <i class="icon-home"></i>Home           </a>       </div>   </div>   <div ui-view></div></div>',s='<ul class="quick-actions">   <li data-ng-class="item.liStyle" data-ng-repeat="item in itemSource">      <a data-ng-href="{{item.href}}">          <i data-ng-class="item.iStyle"></i>          <span data-ng-show="item.number" class="label label-important">{{item.number}}</span>           {{item.topic}}      </a>   </li></ul>',c='<div id="search">   <a href data-ui-sref="about">       <span class="text">About Me</span>   </a></div>';i.put("layout-header.html",a),i.put("layout-content.html",t),i.put("layout-footer.html",e),i.put("layout-sidebar.html",l),i.put("layout-search.html",c),i.put("topic-items.html",s)}])}(angular);
!function(t){"use strict";var e=t.module("platform",[]);e.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e){e.otherwise("topic"),t.state("topic",{url:"/topic",templateUrl:"/templates/topic"}).state("article",{url:"/article/:id",templateUrl:"/templates/article"}).state("about",{url:"/about",templateUrl:"/templates/about"}).state("category",{url:"/topic/:category",templateUrl:"/templates/topic/topic-category"})}]),e.run(["$rootScope","$state","dialogService",function(){}])}(angular);
!function(r){"use strict";r.module("platform").factory("dialogService",["$modal","$templateCache",function(t){return{show:function(e){var o={};r.copy(e,o);var a=t.open(o);return a.result}}}])}(angular);
!function(e){"use strict";e.module("ngWeb").directive("articleItem",["$templateCache","$state",function(e,t){return{restrict:"EA",scope:{item:"="},template:e.get("article-item.html"),link:function(e){e.item.href=t.href("article",{id:e.item._id})}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("layoutHeader",["$templateCache","dialogService",function(t,e){return{restrict:"EA",scope:{},template:t.get("layout-header.html"),controller:function(r){r.login=function(){e.show({template:t.get("login-template.html")})}}}}]).directive("layoutFooter",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-footer.html")}}]).directive("layoutSidebar",["$templateCache","$state","topicItemSource",function(t,e,r){return{restrict:"EA",template:t.get("layout-sidebar.html"),link:function(t){_.forEach(r,function(t){t.href=e.href("category",{category:t.uiSref})}),t.layoutSidebarItemSource=r}}}]).directive("layoutContent",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-content.html")}}]).directive("layoutSearch",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-search.html")}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("topicCategory",["$templateCache",function(t){return{restrict:"EA",scope:{itemSource:"="},template:t.get("topic-category.html"),link:function(){}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("topicItems",["$templateCache","topicItemSource","$state",function(t,e,c){return{restrict:"EA",template:t.get("topic-items.html"),link:function(t){_.forEach(e,function(t){t.href=c.href("category",{category:t.uiSref})}),t.itemSource=e}}}])}(angular);
!function(n){"use strict";n.module("ngWeb").controller("loginController",["$scope","$http",function(n,o){n.ok=function(){o({method:"POST",url:"/api/auth/reg",data:{username:n.username,password:n.password}}).then(function(){})},n.cancel=function(){}}])}(angular);
!function(n){"use strict";n.module("ngWeb").controller("mainframeController",["$scope",function(){}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicCategoryController",["$scope","$http","$state",function(t,o,e){o.get("/api/topics/"+e.params.category).then(function(o){200===o.status&&(t.itemSource=o.data)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicController",["$scope","$http","topicItemSource",function(t,o,n){t.data=n,o.get("/api/topics/grouptopics").then(function(o){if(200===o.status){{t.data}_.forEach(o.data,function(o){var n=_.find(t.data,function(t){return o.topic===t._id});n.number=o.count})}})}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLmpzIiwibmctd2ViLmpzIiwicGxhdGZvcm0uanMiLCJkaWFsb2ctc2VydmljZS5qcyIsImFydGljbGUtaXRlbS1kaXJlY3RpdmUuanMiLCJsYXlvdXQtZGlyZWN0aXZlLmpzIiwidG9waWMtY2F0ZWdvcnktZGlyZWN0aXZlLmpzIiwidG9waWMtaXRlbS1kaXJlY3RpdmUuanMiLCJsb2dpbi1jb250cm9sbGVyLmpzIiwibWFpbmZyYW1lLWNvbnRyb2xsZXIuanMiLCJ0b3BpYy1jYXRlZ29yeS1jb250cm9sbGVyLmpzIiwidG9waWMtY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwiZGVwZW5kSW5qZWN0IiwiYXBwIiwibW9kdWxlIiwiY29uZmlnIiwiY2ZwTG9hZGluZ0JhclByb3ZpZGVyIiwiaW5jbHVkZVNwaW5uZXIiLCIkcHJvdmlkZSIsImRlY29yYXRvciIsIiRodHRwIiwiJGRlbGVnYXRlIiwiJGluamVjdG9yIiwibG9hZGVkVGVtcGxhdGVVcmwiLCJ1cmwiLCJtZXRob2QiLCJ0aGVuIiwiciIsImdldCIsImRhdGEiLCJydW4iLCIkdGVtcGxhdGVDYWNoZSIsImF1dGhlbnRpY2F0aW9uIiwid2luZG93IiwidG9rZW5LZXkiLCJhdXRoUmVxdWlyZSIsImF1dGhTdWNjZXNzIiwibG9naW5TdWNjZXNzIiwibG9naW5GYWlsZWQiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiY2hlY2tUb2tlbkF1dGgiLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZmFjdG9yeSIsIiRyb290U2NvcGUiLCIkcSIsInRva2VuQXV0aCIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlc3BvbnNlIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVzcG9uc2VFcnJvciIsInZhbHVlIiwidG9waWMiLCJsaVN0eWxlIiwidWlTcmVmIiwiaVN0eWxlIiwic3BhblN0eWxlIiwibGF5b3V0SGVhZGVySHRtbCIsImxheW91dEZvb3Rlckh0bWwiLCJsYXlvdXRTaWRlYmFySHRtbCIsImxheW91dENvbnRlbnRIdG1sIiwidG9waWNJdGVtSHRtbCIsImxheW91dFNlYXJjaEh0bWwiLCJwdXQiLCJwbGF0Zm9ybSIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ0ZW1wbGF0ZVVybCIsIiRtb2RhbCIsInNob3ciLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJjb3B5IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJyZXN1bHQiLCJkaXJlY3RpdmUiLCIkc3RhdGUiLCJyZXN0cmljdCIsInNjb3BlIiwiaXRlbSIsInRlbXBsYXRlIiwibGluayIsImhyZWYiLCJpZCIsIl9pZCIsImRpYWxvZ1NlcnZpY2UiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwibG9naW4iLCJ0b3BpY0l0ZW1Tb3VyY2UiLCJfIiwiZm9yRWFjaCIsImsiLCJjYXRlZ29yeSIsImxheW91dFNpZGViYXJJdGVtU291cmNlIiwiaXRlbVNvdXJjZSIsIm9rIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImNhbmNlbCIsInBhcmFtcyIsInJlcyIsInN0YXR1cyIsInVwZGF0ZUl0ZW0iLCJmaW5kIiwiaSIsIm51bWJlciIsImNvdW50Il0sIm1hcHBpbmdzIjoiQ0FJQSxTQUFXQSxHQUNQLFlBRUEsSUFBSUMsSUFFQSxZQUNBLGVBQ0EsV0FDQSxpQkFDQSxRQUNBLFlBQ0EsdUJBSUFDLEVBQU1GLEVBQVFHLE9BQU8sTUFBT0YsRUFFaENDLEdBQUlFLFFBQVEsd0JBQXlCLFNBQVVDLEdBQzNDQSxFQUFzQkMsZ0JBQWlCLEtBRzNDSixFQUFJRSxRQUFRLFdBQVksU0FBVUcsR0FDOUJBLEVBQVNDLFVBQVUsa0JBQW1CLFFBQVMsWUFBYSxZQUFhLFNBQVVDLEVBQU9DLEVBQVdDLEdBU2pHLE1BUkFELEdBQVVFLGtCQUFvQixTQUFVQyxHQUNwQ0osR0FDSUksSUFBS0EsRUFDTEMsT0FBUSxRQUNUQyxLQUFLLFNBQVVD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QVUsUUFBUyxrQkFDdEUsU0FBVUMsRUFBUTFFLEVBQU80RSxHQUNyQkYsRUFBT2pFLEtBQU9tRSxFQUNkNUUsRUFBTVEsSUFBSSwyQkFBMkJGLEtBQUssU0FBVXlCLEdBQ2hELEdBQXdCLE1BQXBCQSxFQUFTMEQsT0FBZ0IsQ0FDekIsQ0FBUWYsRUFBT2pFLEtBRWZvRSxFQUFFQyxRQUFRL0MsRUFBU3RCLEtBQU0sU0FBVXNFLEdBQy9CLEdBQUlXLEdBQWFiLEVBQUVjLEtBQUtqQixFQUFPakUsS0FBTSxTQUFVbUYsR0FDM0MsTUFBT2IsR0FBRTNDLFFBQVV3RCxFQUFFckIsS0FFekJtQixHQUFXRyxPQUFTZCxFQUFFZSxlQU0zQ3ZHIiwiZmlsZSI6Im5nLXdlYi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMy5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZGVwZW5kSW5qZWN0ID0gW1xyXG4vLyAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3BsYXRmb3JtJyxcclxuICAgICAgICAnYXV0aGVudGljYXRpb24nLFxyXG4gICAgICAgICduZ1dlYicsXHJcbiAgICAgICAgJ25nTWVzc2FnZScsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInXHJcbiAgICBdO1xyXG4gICAgLy93aW5kb3cuZ2xvYmVQYXRoPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJztcclxuXHJcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIGRlcGVuZEluamVjdCk7XHJcblxyXG4gICAgYXBwLmNvbmZpZyhbJ2NmcExvYWRpbmdCYXJQcm92aWRlcicsIGZ1bmN0aW9uIChjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcclxuICAgICAgICBjZnBMb2FkaW5nQmFyUHJvdmlkZXIuaW5jbHVkZVNwaW5uZXIgPSBmYWxzZTtcclxuICAgIH1dKTtcclxuXHJcbiAgICBhcHAuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbiAoJHByb3ZpZGUpIHtcclxuICAgICAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0ZW1wbGF0ZUNhY2hlJywgWyckaHR0cCcsICckZGVsZWdhdGUnLCAnJGluamVjdG9yJywgZnVuY3Rpb24gKCRodHRwLCAkZGVsZWdhdGUsICRpbmplY3Rvcikge1xyXG4gICAgICAgICAgICAkZGVsZWdhdGUubG9hZGVkVGVtcGxhdGVVcmwgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICRpbmplY3Rvci5nZXQoJyRjb21waWxlJykoci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgICAgIH1dKTtcclxuICAgIH1dKTtcclxuXHJcbiAgICBhcHAucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkY29tcGlsZSkge1xyXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlLmxvYWRlZFRlbXBsYXRlVXJsKCcvdGVtcGxhdGUvbmctdGVtcGxhdGUuaHRtbCcpO1xyXG4gICAgfV0pO1xyXG5cclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG5cclxuLy9hbmd1bGFyLmJvb3RzdHJhcChkb2N1bWVudCwgWydhcHAnXSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgYXV0aGVudGljYXRpb24gPSBhbmd1bGFyLm1vZHVsZSgnYXV0aGVudGljYXRpb24nLCBbXSk7XHJcblxyXG4gICAgd2luZG93LmF1dGhlbnRpY2F0aW9uID0gd2luZG93LmF1dGhlbnRpY2F0aW9uIHx8IHtcclxuICAgICAgICB0b2tlbktleTogJ2F1dGhlbnRpY2F0aW9uLmtleS5lZHUub25saW5lJyxcclxuICAgICAgICBhdXRoUmVxdWlyZTogJycsXHJcbiAgICAgICAgYXV0aFN1Y2Nlc3M6ICcnLFxyXG4gICAgICAgIGxvZ2luU3VjY2VzczogJycsXHJcbiAgICAgICAgbG9naW5GYWlsZWQ6ICcnXHJcbiAgICB9O1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLnByb3ZpZGVyKCd0b2tlbkF1dGgnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyRxJywgZnVuY3Rpb24gKCRpbmplY3RvciwgJHEpIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2U7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gbG9naW4obmFtZSwgcGFzc3dvcmQpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVG9rZW5BdXRoKCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VG9rZW5BdXRoKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuS2V5ID0gc3RvcmFnZS5nZXRJdGVtKHdpbmRvdy5hdXRoZW50aWNhdGlvbi50b2tlbktleSk7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UodG9rZW5LZXkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7Y2hlY2tUb2tlbkF1dGg6IGNoZWNrVG9rZW5BdXRofTtcclxuICAgICAgICB9XTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLmZhY3RvcnkoJ3Rva2VuQXV0aEh0dHBJbnRlcmNlcHRvcicsIFsnJHJvb3RTY29wZScsICckcScsICd0b2tlbkF1dGgnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsIHRva2VuQXV0aCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrVG9rZW5BdXRoKCkge1xyXG4gICAgICAgICAgICBpZiAodG9rZW5BdXRoLmNoZWNrVG9rZW5BdXRoKCkpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCh3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KHdpbmRvdy5hdXRoZW50aWNhdGlvbi5hdXRoUmVxdWlyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbnRlcmNlcHRvciA9IHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZXNwb25zZUVycm9yJzogZnVuY3Rpb24gKHJlamVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLmNvbmZpZyhmdW5jdGlvbiAoJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgIC8vJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgndG9rZW5BdXRoSHR0cEludGVyY2VwdG9yJyk7XHJcbiAgICB9KTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEzLlxyXG4gKi9cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJywgW10pXHJcbiAgICAgICAgLnZhbHVlKCd0b3BpY0l0ZW1Tb3VyY2UnLCBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnSmF2YXNjcmlwdCcsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbGcgc3BhbjMnLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnamF2YXNjcmlwdCcsXHJcbiAgICAgICAgICAgICAgICBpU3R5bGU6ICdpY29uLXNpZ25hbCcsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ0FuZ3VsYXJqcycsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbGInLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnYW5ndWxhcmpzJyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tZGFzaGJvYXJkJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnTm9kZUpTJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19seSBzcGFuMicsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdub2RlanMnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1pbmJveCcsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ0MjJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sbyBzcGFuMycsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdjc2hhcnAnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10aCcsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ01vbmdvREInLFxyXG4gICAgICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xzJyxcclxuICAgICAgICAgICAgICAgIHVpU3JlZjogJ21vbmdvZGInLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1mdWxsc2NyZWVuJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnU1FMJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sbycsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdzcWwnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10aC1saXN0JyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgIC5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGxheW91dEhlYWRlckh0bWwgPVxyXG4gICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9XCJoZWlnaHQ6IDgxcHhcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICA8ZGl2IGlkPVwidXNlci1uYXZcIiBjbGFzcz1cIm5hdmJhciBuYXZiYXItaW52ZXJzZVwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8dWwgY2xhc3M9XCJuYXZcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgIDxsaT4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICA8YSBocmVmPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24gaWNvbi11c2VyXCI+PC9pPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj53ZWxjb21lPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDwvYT4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgIDwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICA8bGk+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgPGEgaHJlZiBuZy1jbGljaz1cImxvZ2luKClcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24ta2V5XCI+PC9pPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5Mb2dpbjwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICA8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICA8L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8L3VsPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGF5b3V0Rm9vdGVySHRtbCA9XHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvdy1mbHVpZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDxkaXYgaWQ9XCJmb290ZXJcIiBjbGFzcz1cInNwYW4xMlwiPiAnICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgMjAxNC0yMDE1ICZjb3B5O1dlYiBkZXNpZ24gYnkgJyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbWljcm9sdi9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5bbWljcm9sdl08L2E+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgIGZvcmsgbWUgb24gZ2l0aHViOicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL21pY3JvbHYvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+W21pY3JvbHZdPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGF5b3V0U2lkZWJhckh0bWwgPVxyXG4gICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJzaWRlYmFyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPGEgY2xhc3M9XCJ2aXNpYmxlLXBob25lXCIgaHJlZiB1aS1zcmVmPVwidG9waWNcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24taG9tZVwiPjwvaT4gRGFzaGJvYXJkJyArXHJcbiAgICAgICAgICAgICAgICAnICAgPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDx1bD4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICA8bGkgZGF0YS1uZy1yZXBlYXQ9XCJpdGVtIGluIGxheW91dFNpZGViYXJJdGVtU291cmNlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgIDxhIGRhdGEtbmctaHJlZj1cInt7aXRlbS5ocmVmfX1cIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvblwiIGRhdGEtbmctY2xhc3M9XCJpdGVtLmlTdHlsZVwiPjwvaT4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgIDxzcGFuPiB7e2l0ZW0udG9waWN9fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgPC9hPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgIDwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPC91bD4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxheW91dENvbnRlbnRIdG1sID1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiY29udGVudFwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDxkaXYgaWQ9XCJjb250ZW50LWhlYWRlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8ZGl2IGlkPVwiYnJlYWRjcnVtYlwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgPGEgdWktc3JlZj1cImluZGV4XCIgdGl0bGU9XCJHbyB0byBIb21lXCIgY2xhc3M9XCJ0aXAtYm90dG9tXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICA8aSBjbGFzcz1cImljb24taG9tZVwiPjwvaT5Ib21lJyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICA8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDxkaXYgdWktdmlldz48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRvcGljSXRlbUh0bWwgPVxyXG4gICAgICAgICAgICAgICAgJzx1bCBjbGFzcz1cInF1aWNrLWFjdGlvbnNcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICA8bGkgZGF0YS1uZy1jbGFzcz1cIml0ZW0ubGlTdHlsZVwiIGRhdGEtbmctcmVwZWF0PVwiaXRlbSBpbiBpdGVtU291cmNlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgPGEgZGF0YS1uZy1ocmVmPVwie3tpdGVtLmhyZWZ9fVwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICA8aSBkYXRhLW5nLWNsYXNzPVwiaXRlbS5pU3R5bGVcIj48L2k+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgIDxzcGFuIGRhdGEtbmctc2hvdz1cIml0ZW0ubnVtYmVyXCIgY2xhc3M9XCJsYWJlbCBsYWJlbC1pbXBvcnRhbnRcIj57e2l0ZW0ubnVtYmVyfX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgICAgICB7e2l0ZW0udG9waWN9fScgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgIDwvYT4nICtcclxuICAgICAgICAgICAgICAgICcgICA8L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgJzwvdWw+JztcclxuXHJcbiAgICAgICAgICAgIHZhciBsYXlvdXRTZWFyY2hIdG1sID1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwic2VhcmNoXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPGEgaHJlZiBkYXRhLXVpLXNyZWY9XCJhYm91dFwiPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5BYm91dCBNZTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICcgICA8L2E+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbGF5b3V0LWhlYWRlci5odG1sJywgbGF5b3V0SGVhZGVySHRtbCk7XHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbGF5b3V0LWNvbnRlbnQuaHRtbCcsIGxheW91dENvbnRlbnRIdG1sKTtcclxuICAgICAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdsYXlvdXQtZm9vdGVyLmh0bWwnLCBsYXlvdXRGb290ZXJIdG1sKTtcclxuICAgICAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdsYXlvdXQtc2lkZWJhci5odG1sJywgbGF5b3V0U2lkZWJhckh0bWwpO1xyXG4gICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1zZWFyY2guaHRtbCcsIGxheW91dFNlYXJjaEh0bWwpO1xyXG4gICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RvcGljLWl0ZW1zLmh0bWwnLCB0b3BpY0l0ZW1IdG1sKTtcclxuXHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEwLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbiAgICB2YXIgcGxhdGZvcm0gPSBhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm0nLCBbXSk7XHJcblxyXG4gICAgcGxhdGZvcm0uY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJ3RvcGljJyk7XHJcblxyXG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b3BpYycsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvdG9waWMnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvdG9waWMnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdhcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcnRpY2xlLzppZCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9hcnRpY2xlJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2Fib3V0JywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2Fib3V0J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnY2F0ZWdvcnknLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3RvcGljLzpjYXRlZ29yeScsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy90b3BpYy90b3BpYy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbiAgICBwbGF0Zm9ybS5ydW4oWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICdkaWFsb2dTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgZGlhbG9nU2VydmljZSkge1xyXG4gICAgICAgIC8vJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2dCwgbmV4dCwgY3VycmVudCkge1xyXG4gICAgICAgIC8vICAgIGRpYWxvZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coY3VycmVudCk7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2cobmV4dCk7XHJcbiAgICAgICAgLy99KTtcclxuICAgICAgICAvLyRyb290U2NvcGUuJG9uKCd3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFJlcXVpcmUnLCBmdW5jdGlvbiAoZXZ0LCBuZXh0LCBjdXJyZW50KSB7XHJcbiAgICAgICAgLy8gICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4gICAgICAgIC8vfSk7XHJcblxyXG4gICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTIuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtJykuZmFjdG9yeSgnZGlhbG9nU2VydmljZScsIFsnJG1vZGFsJywgJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCRtb2RhbCwgJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGVtcGxhdGU6IG9wdGlvbnMudGVtcGxhdGVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3BlbihkZWZhdWx0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGFsSW5zdGFuY2UucmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuICAgIC8vLmNvbnRyb2xsZXIoJ2RpYWxvZ0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XHJcbiAgICAvL1x0JHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy9cdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2Uoe3R5cGU6IHRydWUsIGRhdGE6ICRzY29wZS5kYXRhfSk7XHJcbiAgICAvL1x0fTtcclxuICAgIC8vXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy9cdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcyh7dHlwZTogZmFsc2V9KTtcclxuICAgIC8vXHR9O1xyXG4gICAgLy99XSk7XHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMS8xNC5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5kaXJlY3RpdmUoJ2FydGljbGVJdGVtJywgWyckdGVtcGxhdGVDYWNoZScsICckc3RhdGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FydGljbGUtaXRlbS5odG1sJyksXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlLCBhdHQpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uaHJlZiA9ICRzdGF0ZS5ocmVmKCdhcnRpY2xlJywge2lkOiBzY29wZS5pdGVtLl9pZH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTIvMjQuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdsYXlvdXRIZWFkZXInLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ2RpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsIGRpYWxvZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbGF5b3V0LWhlYWRlci5odG1sJyksXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3coe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbG9naW4tdGVtcGxhdGUuaHRtbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnbGF5b3V0Rm9vdGVyJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdsYXlvdXQtZm9vdGVyLmh0bWwnKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2xheW91dFNpZGViYXInLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJyRzdGF0ZScsICd0b3BpY0l0ZW1Tb3VyY2UnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRzdGF0ZSwgdG9waWNJdGVtU291cmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2xheW91dC1zaWRlYmFyLmh0bWwnKSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlLCBhdHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godG9waWNJdGVtU291cmNlLCBmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrLmhyZWYgPSAkc3RhdGUuaHJlZignY2F0ZWdvcnknLCB7Y2F0ZWdvcnk6IGsudWlTcmVmfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUubGF5b3V0U2lkZWJhckl0ZW1Tb3VyY2UgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnbGF5b3V0Q29udGVudCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbGF5b3V0LWNvbnRlbnQuaHRtbCcpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfV0pXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnbGF5b3V0U2VhcmNoJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdsYXlvdXQtc2VhcmNoLmh0bWwnKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8xLzE0LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmRpcmVjdGl2ZSgndG9waWNDYXRlZ29yeScsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1Tb3VyY2U6ICc9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCd0b3BpYy1jYXRlZ29yeS5odG1sJyksXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlLCBhdHQpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMi8yMy5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5kaXJlY3RpdmUoJ3RvcGljSXRlbXMnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ3RvcGljSXRlbVNvdXJjZScsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSwgdG9waWNJdGVtU291cmNlLCAkc3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgndG9waWMtaXRlbXMuaHRtbCcpLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGUsIGF0dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3BpY0l0ZW1Tb3VyY2UsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsuaHJlZiA9ICRzdGF0ZS5ocmVmKCdjYXRlZ29yeScsIHtjYXRlZ29yeTogay51aVNyZWZ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5pdGVtU291cmNlID0gdG9waWNJdGVtU291cmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMi8yNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHApIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvYXV0aC9yZWcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEzLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ21haW5mcmFtZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuXHJcbiAgICB9XSk7XHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8xLzguXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcigndG9waWNDYXRlZ29yeUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcclxuICAgICAgICAgICAgLy90ZXN0aW5nLlxyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdG9waWNzLycgKyAkc3RhdGUucGFyYW1zLmNhdGVnb3J5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbVNvdXJjZSA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCd0b3BpY0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICd0b3BpY0l0ZW1Tb3VyY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCB0b3BpY0l0ZW1Tb3VyY2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90b3BpY3MvZ3JvdXB0b3BpY3MnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAkc2NvcGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLmRhdGEsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVJdGVtID0gXy5maW5kKCRzY29wZS5kYXRhLCBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsudG9waWMgPT09IGkuX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSXRlbS5udW1iZXIgPSBrLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=