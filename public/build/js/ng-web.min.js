!function(n){"use strict";var a=["ngAnimate","ui.router","ui.bootstrap","platform","authentication","ngWeb","ngMessage","angular-loading-bar","textAngular"],i=n.module("app",a);i.config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}])}(angular);
!function(n){"use strict";var t=n.module("authentication",[]);window.authentication=window.authentication||{tokenKey:"authentication.key.edu.online",authRequire:"",authSuccess:"",loginSuccess:"",loginFailed:""},t.provider("tokenAuth",function(){this.$get=["$injector","$q",function(){function n(){}var t;return window.localStorage&&(t=window.localStorage),{checkTokenAuth:n}}]}),t.factory("tokenAuthHttpInterceptor",["$rootScope","$q","tokenAuth",function(n,t,e){var o={request:function(n){return n},response:function(n){return n},requestError:function(n){return n},responseError:function(n){return n}};return o}]),t.config(function(){})}(angular);
!function(l){"use strict";l.module("ngWeb",[]).value("topicItemSource",[{topic:"Javascript",liStyle:"bg_lg span3",uiSref:"javascript",iStyle:"icon-leaf",spanStyle:"label label-success"},{topic:"Angularjs",liStyle:"bg_lb span2",uiSref:"angularjs",iStyle:"icon-twitter",spanStyle:"label label-success"},{topic:"NodeJS",liStyle:"bg_ly span2",uiSref:"nodejs",iStyle:"icon-beaker",spanStyle:"label label-success"},{topic:"C#",liStyle:"bg_lo span3",uiSref:"csharp",iStyle:"icon-lemon",spanStyle:"label label-success"},{topic:"MongoDB",liStyle:"bg_ls",uiSref:"mongodb",iStyle:"icon-cloud",spanStyle:"label label-success"},{topic:"SQL",liStyle:"bg_lo",uiSref:"sql",iStyle:"icon-th-large",spanStyle:"label label-success"}])}(angular);
!function(t){"use strict";t.module("platform",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e){e.otherwise("topic"),t.state("topic",{url:"/topic",templateUrl:"/templates/topic"}).state("article",{url:"/article/:id",templateUrl:"/templates/article"}).state("about",{url:"/about",templateUrl:"/templates/about"}).state("category",{url:"/topic/:category",templateUrl:"/templates/topic/topic-category"}).state("edit-article",{url:"/edit-article",templateUrl:"/templates/edit-article"}).state("update-article",{url:"/edit-article/:id",templateUrl:"/templates/edit-article"})}])}(angular);
!function(t){"use strict";t.module("platform").factory("commonService",[function(){function t(t){var e=new Date(t),n=e.getDate(),r="-";10>n&&(n="0"+n);var a=e.getMonth()+1;return 10>a&&(a="0"+a),e.getFullYear()+r+a+r+n}return{YYYYMMDD:t}}])}(angular);
!function(t){"use strict";t.module("platform").factory("dialogService",["$modal","$templateCache",function(e,a){return{show:function(r){var o={};t.copy(r,o),o.template=a.get(r.template);var n=e.open(o);return n.result}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("articleController",["$scope","$http","$state",function(t,n,a){n.get("/api/article/"+a.params.id).then(function(t){200===t.status&&t.data&&$("#articleContent").append(t.data.content)})}])}(angular);
!function(t,e){"use strict";t.module("ngWeb").controller("editArticleController",["$scope","$http","topicItemSource","dialogService","$state",function(t,a,n,r,i){function o(){t.content="",t.title="",t.selectCategory=n[0],t.selectTransfer=t.transfer[0]}function c(t){return e.trim(t)}t.category=n,t.transfer=[{name:"原创",value:!1},{name:"转载",value:!0}],t.submit=function(){var e=c(t.selectCategory.uiSref),n=c(t.selectTransfer.value),i=c(t.title),l=c(t.content);i&&l&&a({method:"post",url:"/api/saveArticle",data:{_id:t._id,category:e,title:i,content:l,transfer:n}}).then(function(t){200===t.status&&t.data&&(o(),r.show({template:"save-ok.html"}))})},t.clear=function(){o()},i.params&&i.params.id?a.get("/api/article/"+i.params.id).then(function(e){200===e.status&&e.data&&(t._id=e.data._id,t.content=e.data.content,t.title=e.data.title,t.selectCategory=_.find(n,{uiSref:e.data.category}),t.selectTransfer=_.find(t.transfer,{value:e.data.transfer}))}):o()}])}(angular,validator);
!function(e){"use strict";e.module("ngWeb").controller("mainframeController",["$scope","$http",function(e,t){e.username="welcome",t.get("/api/auth/authUser").then(function(t){200===t.status&&t.data&&(e.isAdmin=t.data.isAdmin,e.username=t.data.username)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicCategoryController",["$scope","$http","$state",function(t,o,e){o.get("/api/topics/"+e.params.category).then(function(o){200===o.status&&(t.itemSource=o.data)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicController",["$scope","$http","topicItemSource",function(t,o,n){t.data=n,o.get("/api/topics/grouptopics").then(function(o){if(200===o.status){{t.data}_.forEach(o.data,function(o){var n=_.find(t.data,function(t){return o._id.toLowerCase()===t.topic.toLowerCase()});n&&(n.number=o.count)})}})}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLmpzIiwibmctd2ViLmpzIiwicGxhdGZvcm0uanMiLCJjb21tb24tc2VydmljZS5qcyIsImRpYWxvZy1zZXJ2aWNlLmpzIiwiYXJ0aWNsZS1jb250cm9sbGVyLmpzIiwiZWRpdC1hcnRpY2xlLWNvbnRyb2xsZXIuanMiLCJtYWluZnJhbWUtY29udHJvbGxlci5qcyIsInRvcGljLWNhdGVnb3J5LWNvbnRyb2xsZXIuanMiLCJ0b3BpYy1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJkZXBlbmRJbmplY3QiLCJhcHAiLCJtb2R1bGUiLCJjb25maWciLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJpbmNsdWRlU3Bpbm5lciIsImF1dGhlbnRpY2F0aW9uIiwid2luZG93IiwidG9rZW5LZXkiLCJhdXRoUmVxdWlyZSIsImF1dGhTdWNjZXNzIiwibG9naW5TdWNjZXNzIiwibG9naW5GYWlsZWQiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiY2hlY2tUb2tlbkF1dGgiLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZmFjdG9yeSIsIiRyb290U2NvcGUiLCIkcSIsInRva2VuQXV0aCIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlc3BvbnNlIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVzcG9uc2VFcnJvciIsInZhbHVlIiwidG9waWMiLCJsaVN0eWxlIiwidWlTcmVmIiwiaVN0eWxlIiwic3BhblN0eWxlIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiWVlZWU1NREQiLCJzdHIiLCJkIiwiRGF0ZSIsImRhdGUiLCJnZXREYXRlIiwic2VwIiwibW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiJG1vZGFsIiwiJHRlbXBsYXRlQ2FjaGUiLCJzaG93Iiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiY29weSIsInRlbXBsYXRlIiwiZ2V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJyZXN1bHQiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkc3RhdGUiLCJwYXJhbXMiLCJpZCIsInRoZW4iLCJyZXMiLCJzdGF0dXMiLCJkYXRhIiwiJCIsImFwcGVuZCIsImNvbnRlbnQiLCJ2YWxpZGF0b3IiLCJ0b3BpY0l0ZW1Tb3VyY2UiLCJkaWFsb2dTZXJ2aWNlIiwiaW5pdCIsInRpdGxlIiwic2VsZWN0Q2F0ZWdvcnkiLCJzZWxlY3RUcmFuc2ZlciIsInRyYW5zZmVyIiwic2FmZVBvc3QiLCJ0cmltIiwiY2F0ZWdvcnkiLCJuYW1lIiwic3VibWl0IiwibWV0aG9kIiwiX2lkIiwiY2xlYXIiLCJfIiwiZmluZCIsInVzZXJuYW1lIiwiaXNBZG1pbiIsIml0ZW1Tb3VyY2UiLCJmb3JFYWNoIiwiayIsInVwZGF0ZUl0ZW0iLCJpIiwidG9Mb3dlckNhc2UiLCJudW1iZXIiLCJjb3VudCJdLCJtYXBwaW5ncyI6IkNBSUEsU0FBV0EsR0FDUCxZQUVBLElBQUlDLElBQ0EsWUFDQSxZQUNBLGVBQ0EsV0FDQSxpQkFDQSxRQUNBLFlBQ0Esc0JBQ0EsZUFJQUMsRUFBTUYsRUFBUUcsT0FBTyxNQUFPRixFQUVoQ0MsR0FBSUUsUUFBUSx3QkFBeUIsU0FBVUMsR0FDM0NBLEVBQXNCQyxnQkFBaUIsTUFzQjVDTjtDQ3pDSCxTQUFXQSxHQUNQLFlBRUEsSUFBSU8sR0FBaUJQLEVBQVFHLE9BQU8sb0JBRXBDSyxRQUFPRCxlQUFpQkMsT0FBT0QsaUJBQzNCRSxTQUFVLGdDQUNWQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsYUFBYyxHQUNkQyxZQUFhLElBR2pCTixFQUFlTyxTQUFTLFlBQWEsV0FFakNDLEtBQUtDLE1BQVEsWUFBYSxLQUFNLFdBVTVCLFFBQVNDLE1BVFQsR0FBSUMsRUFtQkosT0FsQklWLFFBQU9XLGVBQ1BELEVBQVVWLE9BQU9XLGVBaUJiRixlQUFnQkEsT0FJaENWLEVBQWVhLFFBQVEsNEJBQTZCLGFBQWMsS0FBTSxZQUFhLFNBQVVDLEVBQVlDLEVBQUlDLEdBVTNHLEdBQUlDLElBQ0FDLFFBQVcsU0FBVXJCLEdBQ2pCLE1BQU9BLElBRVhzQixTQUFZLFNBQVVBLEdBQ2xCLE1BQU9BLElBRVhDLGFBQWdCLFNBQVVDLEdBQ3RCLE1BQU9BLElBRVhDLGNBQWlCLFNBQVVELEdBQ3ZCLE1BQU9BLElBR2YsT0FBT0osTUFHWGpCLEVBQWVILE9BQU8sZUFJdkJKO0NDdkVILFNBQVdBLEdBQ1AsWUFFQUEsR0FBUUcsT0FBTyxZQUNWMkIsTUFBTSxvQkFFQ0MsTUFBTyxhQUNQQyxRQUFTLGNBQ1RDLE9BQVEsYUFDUkMsT0FBUSxZQUNSQyxVQUFXLHdCQUdYSixNQUFPLFlBQ1BDLFFBQVMsY0FDVEMsT0FBUSxZQUNSQyxPQUFRLGVBQ1JDLFVBQVcsd0JBR1hKLE1BQU8sU0FDUEMsUUFBUyxjQUNUQyxPQUFRLFNBQ1JDLE9BQVEsY0FDUkMsVUFBVyx3QkFHWEosTUFBTyxLQUNQQyxRQUFTLGNBQ1RDLE9BQVEsU0FDUkMsT0FBUSxhQUNSQyxVQUFXLHdCQUdYSixNQUFPLFVBQ1BDLFFBQVMsUUFDVEMsT0FBUSxVQUNSQyxPQUFRLGFBQ1JDLFVBQVcsd0JBR1hKLE1BQU8sTUFDUEMsUUFBUyxRQUNUQyxPQUFRLE1BQ1JDLE9BQVEsZ0JBQ1JDLFVBQVcsMEJBNEZ4Qm5DO0NDeElILFNBQVdBLEdBQ1AsWUFFQUEsR0FBUUcsT0FBTyxlQUFnQkMsUUFBUSxpQkFBa0IscUJBQXNCLG9CQUMzRSxTQUFVZ0MsRUFBZ0JDLEdBRXRCQSxFQUFtQkMsVUFBVSxTQUU3QkYsRUFDS0csTUFBTSxTQUNIQyxJQUFLLFNBQVVDLFlBQWEscUJBRS9CRixNQUFNLFdBQ0hDLElBQUssZUFBZ0JDLFlBQWEsdUJBRXJDRixNQUFNLFNBQ0hDLElBQUssU0FBVUMsWUFBYSxxQkFFL0JGLE1BQU0sWUFDSEMsSUFBSyxtQkFBb0JDLFlBQWEsb0NBRXpDRixNQUFNLGdCQUNIQyxJQUFLLGdCQUFpQkMsWUFBYSw0QkFFdENGLE1BQU0sa0JBQ0hDLElBQUssb0JBQXFCQyxZQUFhLGdDQUd4RHpDO0NDNUJILFNBQVdBLEdBQ1AsWUFFQUEsR0FBUUcsT0FBTyxZQUFZaUIsUUFBUSxpQkFBa0IsV0FFakQsUUFBU3NCLEdBQVNDLEdBRWQsR0FBSUMsR0FBSSxHQUFJQyxNQUFLRixHQUNiRyxFQUFPRixFQUFFRyxVQUNUQyxFQUFNLEdBQ0MsSUFBUEYsSUFDQUEsRUFBTyxJQUFNQSxFQUVqQixJQUFJRyxHQUFRTCxFQUFFTSxXQUFhLENBSTNCLE9BSFksSUFBUkQsSUFDQUEsRUFBUSxJQUFNQSxHQUVYTCxFQUFFTyxjQUFnQkgsRUFBTUMsRUFBUUQsRUFBTUYsRUFHakQsT0FDSUosU0FBVUEsT0FHbkIxQztDQ3hCSCxTQUFXQSxHQUNQLFlBRUFBLEdBQVFHLE9BQU8sWUFBWWlCLFFBQVEsaUJBQWtCLFNBQVUsaUJBQWtCLFNBQVVnQyxFQUFRQyxHQUMvRixPQUNJQyxLQUFNLFNBQVVDLEdBQ1osR0FBSUMsS0FDSnhELEdBQVF5RCxLQUFLRixFQUFTQyxHQUN0QkEsRUFBZUUsU0FBV0wsRUFBZU0sSUFBSUosRUFBUUcsU0FDckQsSUFBSUUsR0FBZ0JSLEVBQU9TLEtBQUtMLEVBRWhDLE9BQU9JLEdBQWNFLGFBWWxDOUQ7Q0N2QkgsU0FBV0EsR0FDUCxZQUVBQSxHQUFRRyxPQUFPLFNBQVM0RCxXQUFXLHFCQUFzQixTQUFVLFFBQVMsU0FDeEUsU0FBVUMsRUFBUUMsRUFBT0MsR0FFckJELEVBQU1OLElBQUksZ0JBQWtCTyxFQUFPQyxPQUFPQyxJQUFJQyxLQUFLLFNBQVVDLEdBQ3RDLE1BQWZBLEVBQUlDLFFBQWtCRCxFQUFJRSxNQUMxQkMsRUFBRSxtQkFBbUJDLE9BQU9KLEVBQUlFLEtBQUtHLGVBS3REM0U7Q0NiSCxTQUFXQSxFQUFTNEUsR0FDaEIsWUFHQTVFLEdBQVFHLE9BQU8sU0FBUzRELFdBQVcseUJBQTBCLFNBQVUsUUFBUyxrQkFBbUIsZ0JBQWlCLFNBQ2hILFNBQVVDLEVBQVFDLEVBQU9ZLEVBQWlCQyxFQUFlWixHQUtyRCxRQUFTYSxLQUNMZixFQUFPVyxRQUFVLEdBQ2pCWCxFQUFPZ0IsTUFBUSxHQUNmaEIsRUFBT2lCLGVBQWlCSixFQUFnQixHQUN4Q2IsRUFBT2tCLGVBQWlCbEIsRUFBT21CLFNBQVMsR0FHNUMsUUFBU0MsR0FBU3pDLEdBRWQsTUFBT2lDLEdBQVVTLEtBQUsxQyxHQVoxQnFCLEVBQU9zQixTQUFXVCxFQUNsQmIsRUFBT21CLFdBQWFJLEtBQU0sS0FBTXpELE9BQU8sSUFBU3lELEtBQU0sS0FBTXpELE9BQU8sSUFjbkVrQyxFQUFPd0IsT0FBUyxXQUNaLEdBQUlGLEdBQVdGLEVBQVNwQixFQUFPaUIsZUFBZWhELFFBQzFDa0QsRUFBV0MsRUFBU3BCLEVBQU9rQixlQUFlcEQsT0FDMUNrRCxFQUFRSSxFQUFTcEIsRUFBT2dCLE9BQ3hCTCxFQUFVUyxFQUFTcEIsRUFBT1csUUFFekJLLElBQVVMLEdBSWZWLEdBQ0l3QixPQUFRLE9BQ1JqRCxJQUFLLG1CQUNMZ0MsTUFDSWtCLElBQUsxQixFQUFPMEIsSUFDWkosU0FBVUEsRUFDVk4sTUFBT0EsRUFDUEwsUUFBU0EsRUFDVFEsU0FBVUEsS0FFZmQsS0FBSyxTQUFVQyxHQUNLLE1BQWZBLEVBQUlDLFFBQWtCRCxFQUFJRSxPQUMxQk8sSUFDQUQsRUFBY3hCLE1BQ1ZJLFNBQVUscUJBTTFCTSxFQUFPMkIsTUFBUSxXQUNYWixLQUdBYixFQUFPQyxRQUFVRCxFQUFPQyxPQUFPQyxHQUUvQkgsRUFBTU4sSUFBSSxnQkFBa0JPLEVBQU9DLE9BQU9DLElBQUlDLEtBQUssU0FBVUMsR0FDdEMsTUFBZkEsRUFBSUMsUUFBa0JELEVBQUlFLE9BQzFCUixFQUFPMEIsSUFBTXBCLEVBQUlFLEtBQUtrQixJQUN0QjFCLEVBQU9XLFFBQVVMLEVBQUlFLEtBQUtHLFFBQzFCWCxFQUFPZ0IsTUFBUVYsRUFBSUUsS0FBS1EsTUFDeEJoQixFQUFPaUIsZUFBaUJXLEVBQUVDLEtBQUtoQixHQUFrQjVDLE9BQVFxQyxFQUFJRSxLQUFLYyxXQUNsRXRCLEVBQU9rQixlQUFpQlUsRUFBRUMsS0FBSzdCLEVBQU9tQixVQUFXckQsTUFBT3dDLEVBQUlFLEtBQUtXLGNBSXpFSixRQUdiL0UsUUFBUzRFO0NDdkVaLFNBQVc1RSxHQUNQLFlBRUFBLEdBQVFHLE9BQU8sU0FBUzRELFdBQVcsdUJBQXdCLFNBQVUsUUFDakUsU0FBVUMsRUFBUUMsR0FDZEQsRUFBTzhCLFNBQVcsVUFDbEI3QixFQUFNTixJQUFJLHNCQUFzQlUsS0FBSyxTQUFVQyxHQUN4QixNQUFmQSxFQUFJQyxRQUFrQkQsRUFBSUUsT0FDMUJSLEVBQU8rQixRQUFVekIsRUFBSUUsS0FBS3VCLFFBQzFCL0IsRUFBTzhCLFNBQVd4QixFQUFJRSxLQUFLc0IsZ0JBSTVDOUY7Q0NiSCxTQUFXQSxHQUNQLFlBRUFBLEdBQVFHLE9BQU8sU0FBUzRELFdBQVcsMkJBQTRCLFNBQVUsUUFBUyxTQUM5RSxTQUFVQyxFQUFRQyxFQUFPQyxHQUNyQkQsRUFBTU4sSUFBSSxlQUFpQk8sRUFBT0MsT0FBT21CLFVBQVVqQixLQUFLLFNBQVVDLEdBQzNDLE1BQWZBLEVBQUlDLFNBQ0pQLEVBQU9nQyxXQUFhMUIsRUFBSUUsWUFLekN4RTtDQ2JILFNBQVdBLEdBQ1AsWUFLQUEsR0FBUUcsT0FBTyxTQUFTNEQsV0FBVyxtQkFBb0IsU0FBVSxRQUFTLGtCQUN0RSxTQUFVQyxFQUFRQyxFQUFPWSxHQUNyQmIsRUFBT1EsS0FBT0ssRUFDZFosRUFBTU4sSUFBSSwyQkFBMkJVLEtBQUssU0FBVTNDLEdBQ2hELEdBQXdCLE1BQXBCQSxFQUFTNkMsT0FBZ0IsQ0FDekIsQ0FBUVAsRUFBT1EsS0FFZm9CLEVBQUVLLFFBQVF2RSxFQUFTOEMsS0FBTSxTQUFVMEIsR0FDL0IsR0FBSUMsR0FBYVAsRUFBRUMsS0FBSzdCLEVBQU9RLEtBQU0sU0FBVTRCLEdBQzNDLE1BQU9GLEdBQUVSLElBQUlXLGdCQUFrQkQsRUFBRXJFLE1BQU1zRSxlQUV2Q0YsS0FDQUEsRUFBV0csT0FBU0osRUFBRUssZ0JBTy9DdkciLCJmaWxlIjoibmctd2ViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8zLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRJbmplY3QgPSBbXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3BsYXRmb3JtJyxcclxuICAgICAgICAnYXV0aGVudGljYXRpb24nLFxyXG4gICAgICAgICduZ1dlYicsXHJcbiAgICAgICAgJ25nTWVzc2FnZScsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxyXG4gICAgICAgICd0ZXh0QW5ndWxhcidcclxuICAgIF07XHJcbiAgICAvL3dpbmRvdy5nbG9iZVBhdGg9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG5cclxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgZGVwZW5kSW5qZWN0KTtcclxuXHJcbiAgICBhcHAuY29uZmlnKFsnY2ZwTG9hZGluZ0JhclByb3ZpZGVyJywgZnVuY3Rpb24gKGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xyXG4gICAgICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlU3Bpbm5lciA9IGZhbHNlO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIC8vYXBwLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24gKCRwcm92aWRlKSB7XHJcbiAgICAvLyAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0ZW1wbGF0ZUNhY2hlJywgWyckaHR0cCcsICckZGVsZWdhdGUnLCAnJGluamVjdG9yJywgZnVuY3Rpb24gKCRodHRwLCAkZGVsZWdhdGUsICRpbmplY3Rvcikge1xyXG4gICAgLy8gICAgICAgICRkZWxlZ2F0ZS5sb2FkZWRUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIC8vICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgLy8gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAvLyAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAvLyAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICRpbmplY3Rvci5nZXQoJyRjb21waWxlJykoci5kYXRhKTtcclxuICAgIC8vICAgICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgICAgfTtcclxuICAgIC8vICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgLy8gICAgfV0pO1xyXG4gICAgLy99XSk7XHJcbiAgICAvL1xyXG4gICAgLy9hcHAucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkY29tcGlsZSkge1xyXG4gICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUubG9hZGVkVGVtcGxhdGVVcmwoJy90ZW1wbGF0ZS9uZy10ZW1wbGF0ZS5odG1sJyk7XHJcbiAgICAvL31dKTtcclxuXHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbi8vYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnYXBwJ10pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTEuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uID0gYW5ndWxhci5tb2R1bGUoJ2F1dGhlbnRpY2F0aW9uJywgW10pO1xyXG5cclxuICAgIHdpbmRvdy5hdXRoZW50aWNhdGlvbiA9IHdpbmRvdy5hdXRoZW50aWNhdGlvbiB8fCB7XHJcbiAgICAgICAgdG9rZW5LZXk6ICdhdXRoZW50aWNhdGlvbi5rZXkuZWR1Lm9ubGluZScsXHJcbiAgICAgICAgYXV0aFJlcXVpcmU6ICcnLFxyXG4gICAgICAgIGF1dGhTdWNjZXNzOiAnJyxcclxuICAgICAgICBsb2dpblN1Y2Nlc3M6ICcnLFxyXG4gICAgICAgIGxvZ2luRmFpbGVkOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5wcm92aWRlcigndG9rZW5BdXRoJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckcScsIGZ1bmN0aW9uICgkaW5qZWN0b3IsICRxKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlO1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5hbWUsIHBhc3N3b3JkKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b2tlbktleSA9IHN0b3JhZ2UuZ2V0SXRlbSh3aW5kb3cuYXV0aGVudGljYXRpb24udG9rZW5LZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHRva2VuS2V5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge2NoZWNrVG9rZW5BdXRoOiBjaGVja1Rva2VuQXV0aH07XHJcbiAgICAgICAgfV07XHJcbiAgICB9KTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5mYWN0b3J5KCd0b2tlbkF1dGhIdHRwSW50ZXJjZXB0b3InLCBbJyRyb290U2NvcGUnLCAnJHEnLCAndG9rZW5BdXRoJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCB0b2tlbkF1dGgpIHtcclxuICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgaWYgKHRva2VuQXV0aC5jaGVja1Rva2VuQXV0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3Qod2luZG93LmF1dGhlbnRpY2F0aW9uLmF1dGhTdWNjZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCh3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFJlcXVpcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZXF1ZXN0RXJyb3InOiBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncmVzcG9uc2VFcnJvcic6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbnRlcmNlcHRvcjtcclxuICAgIH1dKTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5jb25maWcoZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAvLyRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ3Rva2VuQXV0aEh0dHBJbnRlcmNlcHRvcicpO1xyXG4gICAgfSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMy5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicsIFtdKVxyXG4gICAgICAgIC52YWx1ZSgndG9waWNJdGVtU291cmNlJywgW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ0phdmFzY3JpcHQnLFxyXG4gICAgICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xnIHNwYW4zJyxcclxuICAgICAgICAgICAgICAgIHVpU3JlZjogJ2phdmFzY3JpcHQnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1sZWFmJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnQW5ndWxhcmpzJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sYiBzcGFuMicsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdhbmd1bGFyanMnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10d2l0dGVyJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnTm9kZUpTJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19seSBzcGFuMicsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdub2RlanMnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1iZWFrZXInLFxyXG4gICAgICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9waWM6ICdDIycsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbG8gc3BhbjMnLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnY3NoYXJwJyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tbGVtb24nLFxyXG4gICAgICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9waWM6ICdNb25nb0RCJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19scycsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdtb25nb2RiJyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tY2xvdWQnLFxyXG4gICAgICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9waWM6ICdTUUwnLFxyXG4gICAgICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xvJyxcclxuICAgICAgICAgICAgICAgIHVpU3JlZjogJ3NxbCcsXHJcbiAgICAgICAgICAgICAgICBpU3R5bGU6ICdpY29uLXRoLWxhcmdlJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAvLy5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgdmFyIGxheW91dEhlYWRlckh0bWwgPVxyXG4gICAgICAgIC8vICAgICAgICAnPGRpdiBzdHlsZT1cImhlaWdodDogODFweFwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGRpdiBpZD1cInVzZXItbmF2XCIgY2xhc3M9XCJuYXZiYXIgbmF2YmFyLWludmVyc2VcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8dWwgY2xhc3M9XCJuYXZcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPGxpPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgPGEgaHJlZj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24gaWNvbi11c2VyXCI+PC9pPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dFwiIGRhdGEtbmctbW9kZWw9XCJ1c2VybmFtZVwiPjwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPC9saT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPGxpPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgPGEgaHJlZiBuZy1jbGljaz1cImxvZ2luKClcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24tZ2l0aHViXCI+PC9pPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dFwiPkxvZ2luPC9zcGFuPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgPC9hPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWdpdGh1YlwiPnt7dXNlcm5hbWV9fTwvaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPC9saT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8L3VsPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPC9kaXY+JyArXHJcbiAgICAgICAgLy8gICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgdmFyIGxheW91dEZvb3Rlckh0bWwgPVxyXG4gICAgICAgIC8vICAgICAgICAnPGRpdiBjbGFzcz1cInJvdy1mbHVpZFwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGRpdiBpZD1cImZvb3RlclwiIGNsYXNzPVwic3BhbjEyXCI+ICcgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDIwMTQtMjAxNSAmY29weTtXZWIgZGVzaWduIGJ5ICcgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbWljcm9sdi9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5bbWljcm9sdl08L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgZm9yayBtZSBvbiBnaXRodWI6JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb2x2L1wiIHRhcmdldD1cIl9ibGFua1wiPlttaWNyb2x2XTwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgIC8vICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciBsYXlvdXRTaWRlYmFySHRtbCA9XHJcbiAgICAgICAgLy8gICAgICAgICc8ZGl2IGlkPVwic2lkZWJhclwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGEgY2xhc3M9XCJ2aXNpYmxlLXBob25lXCIgaHJlZiB1aS1zcmVmPVwidG9waWNcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8aSBjbGFzcz1cImljb24gaWNvbi1ob21lXCI+PC9pPiBEYXNoYm9hcmQnICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDx1bD4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgIDxsaSBkYXRhLW5nLXJlcGVhdD1cIml0ZW0gaW4gbGF5b3V0U2lkZWJhckl0ZW1Tb3VyY2VcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICA8YSBkYXRhLW5nLWhyZWY9XCJ7e2l0ZW0uaHJlZn19XCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvblwiIGRhdGEtbmctY2xhc3M9XCJpdGVtLmlTdHlsZVwiPjwvaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgPHNwYW4+IHt7aXRlbS50b3BpY319PC9zcGFuPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgIDwvbGk+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8L3VsPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciBsYXlvdXRDb250ZW50SHRtbCA9XHJcbiAgICAgICAgLy8gICAgICAgICc8ZGl2IGlkPVwiY29udGVudFwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGRpdiBpZD1cImNvbnRlbnQtaGVhZGVyXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPGRpdiBpZD1cImJyZWFkY3J1bWJcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPGEgdWktc3JlZj1cImluZGV4XCIgdGl0bGU9XCJHbyB0byBIb21lXCIgY2xhc3M9XCJ0aXAtYm90dG9tXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi1ob21lXCI+PC9pPkhvbWUnICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgPC9hPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDwvZGl2PicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPC9kaXY+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8ZGl2IHVpLXZpZXc+PC9kaXY+JyArXHJcbiAgICAgICAgLy8gICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgdmFyIHRvcGljSXRlbUh0bWwgPVxyXG4gICAgICAgIC8vICAgICAgICAnPHVsIGNsYXNzPVwicXVpY2stYWN0aW9uc1wiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGxpIGRhdGEtbmctY2xhc3M9XCJpdGVtLmxpU3R5bGVcIiBkYXRhLW5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbVNvdXJjZVwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgPGEgZGF0YS1uZy1ocmVmPVwie3tpdGVtLmhyZWZ9fVwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgIDxpIGRhdGEtbmctY2xhc3M9XCJpdGVtLmlTdHlsZVwiPjwvaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICA8c3BhbiBkYXRhLW5nLXNob3c9XCJpdGVtLm51bWJlclwiIGNsYXNzPVwibGFiZWwgbGFiZWwtaW1wb3J0YW50XCI+e3tpdGVtLm51bWJlcn19PC9zcGFuPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICB7e2l0ZW0udG9waWN9fScgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgPC9hPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPC9saT4nICtcclxuICAgICAgICAvLyAgICAgICAgJzwvdWw+JztcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciBsYXlvdXRTZWFyY2hIdG1sID1cclxuICAgICAgICAvLyAgICAgICAgJzxkaXYgaWQ9XCJzZWFyY2hcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxhIGhyZWYgZGF0YS11aS1zcmVmPVwiYWJvdXRcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5BYm91dCBNZTwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxhIGhyZWYgZGF0YS1uZy1zaG93PVwiaXNBZG1pblwiIGRhdGEtdWktc3JlZj1cImVkaXQtYXJ0aWNsZVwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dFwiPlBvc3QgQXJ0aWNsZTwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1oZWFkZXIuaHRtbCcsIGxheW91dEhlYWRlckh0bWwpO1xyXG4gICAgICAgIC8vICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbGF5b3V0LWNvbnRlbnQuaHRtbCcsIGxheW91dENvbnRlbnRIdG1sKTtcclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1mb290ZXIuaHRtbCcsIGxheW91dEZvb3Rlckh0bWwpO1xyXG4gICAgICAgIC8vICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbGF5b3V0LXNpZGViYXIuaHRtbCcsIGxheW91dFNpZGViYXJIdG1sKTtcclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1zZWFyY2guaHRtbCcsIGxheW91dFNlYXJjaEh0bWwpO1xyXG4gICAgICAgIC8vICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgndG9waWMtaXRlbXMuaHRtbCcsIHRvcGljSXRlbUh0bWwpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy99XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTAuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtJywgW10pLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCd0b3BpYycpO1xyXG5cclxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgndG9waWMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3RvcGljJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3RvcGljJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXJ0aWNsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXJ0aWNsZS86aWQnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvYXJ0aWNsZSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hYm91dCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9hYm91dCdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2NhdGVnb3J5Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy90b3BpYy86Y2F0ZWdvcnknLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvdG9waWMvdG9waWMtY2F0ZWdvcnknXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdlZGl0LWFydGljbGUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2VkaXQtYXJ0aWNsZScsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9lZGl0LWFydGljbGUnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd1cGRhdGUtYXJ0aWNsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZWRpdC1hcnRpY2xlLzppZCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9lZGl0LWFydGljbGUnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcbn0pKGFuZ3VsYXIpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtJykuZmFjdG9yeSgnY29tbW9uU2VydmljZScsIFtmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIFlZWVlNTUREKHN0cikge1xyXG5cclxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzdHIpLFxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IGQuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgc2VwID0gJy0nO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gJzAnICsgZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICBpZiAobW9udGggPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgbW9udGggPSAnMCcgKyBtb250aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgc2VwICsgbW9udGggKyBzZXAgKyBkYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgWVlZWU1NREQ6IFlZWVlNTUREXHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm0nKS5mYWN0b3J5KCdkaWFsb2dTZXJ2aWNlJywgWyckbW9kYWwnLCAnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJG1vZGFsLCAkdGVtcGxhdGVDYWNoZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShvcHRpb25zLCBkZWZhdWx0T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0T3B0aW9ucy50ZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldChvcHRpb25zLnRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oZGVmYXVsdE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RhbEluc3RhbmNlLnJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcbiAgICAvLy5jb250cm9sbGVyKCdkaWFsb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xyXG4gICAgLy9cdCRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vXHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHt0eXBlOiB0cnVlLCBkYXRhOiAkc2NvcGUuZGF0YX0pO1xyXG4gICAgLy9cdH07XHJcbiAgICAvL1x0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vXHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3Moe3R5cGU6IGZhbHNlfSk7XHJcbiAgICAvL1x0fTtcclxuICAgIC8vfV0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzIvMy5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCdhcnRpY2xlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRzdGF0ZSkge1xyXG5cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2FydGljbGUvJyArICRzdGF0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNhcnRpY2xlQ29udGVudCcpLmFwcGVuZChyZXMuZGF0YS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzIvMi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIsIHZhbGlkYXRvcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vSlNIaW50IFcxMTdcclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ2VkaXRBcnRpY2xlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJ3RvcGljSXRlbVNvdXJjZScsICdkaWFsb2dTZXJ2aWNlJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIHRvcGljSXRlbVNvdXJjZSwgZGlhbG9nU2VydmljZSwgJHN0YXRlKSB7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcnkgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2ZlciA9IFt7bmFtZTogJ+WOn+WImycsIHZhbHVlOiBmYWxzZX0sIHtuYW1lOiAn6L2s6L29JywgdmFsdWU6IHRydWV9XTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q2F0ZWdvcnkgPSB0b3BpY0l0ZW1Tb3VyY2VbMF07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0VHJhbnNmZXIgPSAkc2NvcGUudHJhbnNmZXJbMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVQb3N0KHN0cikge1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gdmFsaWRhdG9yLmVzY2FwZSh2YWxpZGF0b3IudHJpbShzdHIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0b3IudHJpbShzdHIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gc2FmZVBvc3QoJHNjb3BlLnNlbGVjdENhdGVnb3J5LnVpU3JlZik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNmZXIgPSBzYWZlUG9zdCgkc2NvcGUuc2VsZWN0VHJhbnNmZXIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gc2FmZVBvc3QoJHNjb3BlLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc2FmZVBvc3QoJHNjb3BlLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGl0bGUgfHwgIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvc2F2ZUFydGljbGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiAkc2NvcGUuX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXI6IHRyYW5zZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ3NhdmUtb2suaHRtbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoJHN0YXRlLnBhcmFtcyAmJiAkc3RhdGUucGFyYW1zLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOWPguaVsOWtmOWcqO+8jOWImeS4unVwZGF0ZSFcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hcnRpY2xlLycgKyAkc3RhdGUucGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5faWQgPSByZXMuZGF0YS5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50ID0gcmVzLmRhdGEuY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gcmVzLmRhdGEudGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RDYXRlZ29yeSA9IF8uZmluZCh0b3BpY0l0ZW1Tb3VyY2UsIHt1aVNyZWY6IHJlcy5kYXRhLmNhdGVnb3J5fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RUcmFuc2ZlciA9IF8uZmluZCgkc2NvcGUudHJhbnNmZXIsIHt2YWx1ZTogcmVzLmRhdGEudHJhbnNmZXJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1dKTtcclxufSkoYW5ndWxhciwgdmFsaWRhdG9yKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcignbWFpbmZyYW1lQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCkge1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcm5hbWUgPSAnd2VsY29tZSc7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hdXRoL2F1dGhVc2VyJykudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzQWRtaW4gPSByZXMuZGF0YS5pc0FkbWluO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VybmFtZSA9IHJlcy5kYXRhLnVzZXJuYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8xLzguXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcigndG9waWNDYXRlZ29yeUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3RvcGljcy8nICsgJHN0YXRlLnBhcmFtcy5jYXRlZ29yeSkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1Tb3VyY2UgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEzLlxyXG4gKi9cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpbmRleCB3aWxsIHVzZSB0aGlzIGNvbnRyb2xsZXJcclxuICAgICAqL1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcigndG9waWNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAndG9waWNJdGVtU291cmNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgdG9waWNJdGVtU291cmNlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5kYXRhID0gdG9waWNJdGVtU291cmNlO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdG9waWNzL2dyb3VwdG9waWNzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gJHNjb3BlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChyZXNwb25zZS5kYXRhLCBmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlSXRlbSA9IF8uZmluZCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrLl9pZC50b0xvd2VyQ2FzZSgpID09PSBpLnRvcGljLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlSXRlbS5udW1iZXIgPSBrLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==