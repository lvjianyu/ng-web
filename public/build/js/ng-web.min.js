!function(n){"use strict";var a=["ngAnimate","ui.router","ui.bootstrap","platform","authentication","ngWeb","ngMessage","angular-loading-bar","textAngular"],i=n.module("app",a);i.config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}])}(angular);
!function(n){"use strict";var t=n.module("authentication",[]);window.authentication=window.authentication||{tokenKey:"authentication.key.edu.online",authRequire:"",authSuccess:"",loginSuccess:"",loginFailed:""},t.provider("tokenAuth",function(){this.$get=["$injector","$q",function(){function n(){}var t;return window.localStorage&&(t=window.localStorage),{checkTokenAuth:n}}]}),t.factory("tokenAuthHttpInterceptor",["$rootScope","$q","tokenAuth",function(n,t,e){var o={request:function(n){return n},response:function(n){return n},requestError:function(n){return n},responseError:function(n){return n}};return o}]),t.config(function(){})}(angular);
!function(l){"use strict";l.module("ngWeb",[]).value("topicItemSource",[{topic:"Javascript",liStyle:"bg_lg span3",uiSref:"javascript",iStyle:"icon-leaf",spanStyle:"label label-success"},{topic:"Angularjs",liStyle:"bg_lb span2",uiSref:"angularjs",iStyle:"icon-twitter",spanStyle:"label label-success"},{topic:"NodeJS",liStyle:"bg_ly span2",uiSref:"nodejs",iStyle:"icon-beaker",spanStyle:"label label-success"},{topic:"C#",liStyle:"bg_lo span3",uiSref:"csharp",iStyle:"icon-lemon",spanStyle:"label label-success"},{topic:"MongoDB",liStyle:"bg_ls",uiSref:"mongodb",iStyle:"icon-cloud",spanStyle:"label label-success"},{topic:"SQL",liStyle:"bg_lo",uiSref:"sql",iStyle:"icon-th-large",spanStyle:"label label-success"}])}(angular);
!function(t){"use strict";t.module("platform",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e){e.otherwise("topic"),t.state("topic",{url:"/topic",templateUrl:"/templates/topic"}).state("article",{url:"/article/:id",templateUrl:"/templates/article"}).state("about",{url:"/about",templateUrl:"/templates/about"}).state("category",{url:"/topic/:category",templateUrl:"/templates/topic/topic-category"}).state("edit-article",{url:"/edit-article",templateUrl:"/templates/edit-article"}).state("update-article",{url:"/edit-article/:id",templateUrl:"/templates/edit-article"})}])}(angular);
!function(t){"use strict";t.module("platform").factory("commonService",[function(){function t(t){var e=new Date(t),n=e.getDate(),r="-";10>n&&(n="0"+n);var a=e.getMonth()+1;return 10>a&&(a="0"+a),e.getFullYear()+r+a+r+n}return{YYYYMMDD:t}}])}(angular);
!function(t){"use strict";t.module("platform").factory("dialogService",["$modal","$templateCache",function(e,a){return{show:function(r){var o={};t.copy(r,o),o.template=a.get(r.template);var n=e.open(o);return n.result}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("articleController",["$scope","$http","$state",function(t,n,a){n.get("/api/article/"+a.params.id).then(function(t){200===t.status&&t.data&&$("#articleContent").append(t.data.content)})}])}(angular);
!function(t,e){"use strict";t.module("ngWeb").controller("editArticleController",["$scope","$http","topicItemSource","dialogService","$state",function(t,a,n,r,i){function o(){t.content="",t.title="",t.selectCategory=n[0],t.selectTransfer=t.transfer[0]}function c(t){return e.trim(t)}t.category=n,t.transfer=[{name:"原创",value:!1},{name:"转载",value:!0}],t.submit=function(){var e=c(t.selectCategory.uiSref),n=c(t.selectTransfer.value),i=c(t.title),l=c(t.content);i&&l&&a({method:"post",url:"/api/saveArticle",data:{_id:t._id,category:e,title:i,content:l,transfer:n}}).then(function(t){200===t.status&&t.data&&(o(),r.show({template:"save-ok.html"}))})},t.clear=function(){o()},i.params&&i.params.id?a.get("/api/article/"+i.params.id).then(function(e){200===e.status&&e.data&&(t._id=e.data._id,t.content=e.data.content,t.title=e.data.title,t.selectCategory=_.find(n,{uiSref:e.data.category}),t.selectTransfer=_.find(t.transfer,{value:e.data.transfer}))}):o()}])}(angular,validator);
!function(t){"use strict";t.module("ngWeb").controller("mainframeController",["$scope","$http",function(t,a){a.get("/api/auth/authUser").then(function(a){200===a.status&&a.data&&(t.isAuth=!0,t.isAdmin=a.data.isAdmin,t.username=a.data.username)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicCategoryController",["$scope","$http","$state",function(t,o,e){o.get("/api/topics/"+e.params.category).then(function(o){200===o.status&&(t.itemSource=o.data)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicController",["$scope","$http","topicItemSource",function(t,o,n){t.data=n,o.get("/api/topics/grouptopics").then(function(o){if(200===o.status){{t.data}_.forEach(o.data,function(o){var n=_.find(t.data,function(t){return o._id.toLowerCase()===t.topic.toLowerCase()});n&&(n.number=o.count)})}})}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLmpzIiwibmctd2ViLmpzIiwicGxhdGZvcm0uanMiLCJjb21tb24tc2VydmljZS5qcyIsImRpYWxvZy1zZXJ2aWNlLmpzIiwiYXJ0aWNsZS1jb250cm9sbGVyLmpzIiwiZWRpdC1hcnRpY2xlLWNvbnRyb2xsZXIuanMiLCJtYWluZnJhbWUtY29udHJvbGxlci5qcyIsInRvcGljLWNhdGVnb3J5LWNvbnRyb2xsZXIuanMiLCJ0b3BpYy1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJkZXBlbmRJbmplY3QiLCJhcHAiLCJtb2R1bGUiLCJjb25maWciLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJpbmNsdWRlU3Bpbm5lciIsImF1dGhlbnRpY2F0aW9uIiwid2luZG93IiwidG9rZW5LZXkiLCJhdXRoUmVxdWlyZSIsImF1dGhTdWNjZXNzIiwibG9naW5TdWNjZXNzIiwibG9naW5GYWlsZWQiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiY2hlY2tUb2tlbkF1dGgiLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZmFjdG9yeSIsIiRyb290U2NvcGUiLCIkcSIsInRva2VuQXV0aCIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlc3BvbnNlIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVzcG9uc2VFcnJvciIsInZhbHVlIiwidG9waWMiLCJsaVN0eWxlIiwidWlTcmVmIiwiaVN0eWxlIiwic3BhblN0eWxlIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiWVlZWU1NREQiLCJzdHIiLCJkIiwiRGF0ZSIsImRhdGUiLCJnZXREYXRlIiwic2VwIiwibW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiJG1vZGFsIiwiJHRlbXBsYXRlQ2FjaGUiLCJzaG93Iiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiY29weSIsInRlbXBsYXRlIiwiZ2V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJyZXN1bHQiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkc3RhdGUiLCJwYXJhbXMiLCJpZCIsInRoZW4iLCJyZXMiLCJzdGF0dXMiLCJkYXRhIiwiJCIsImFwcGVuZCIsImNvbnRlbnQiLCJ2YWxpZGF0b3IiLCJ0b3BpY0l0ZW1Tb3VyY2UiLCJkaWFsb2dTZXJ2aWNlIiwiaW5pdCIsInRpdGxlIiwic2VsZWN0Q2F0ZWdvcnkiLCJzZWxlY3RUcmFuc2ZlciIsInRyYW5zZmVyIiwic2FmZVBvc3QiLCJ0cmltIiwiY2F0ZWdvcnkiLCJuYW1lIiwic3VibWl0IiwibWV0aG9kIiwiX2lkIiwiY2xlYXIiLCJfIiwiZmluZCIsImlzQXV0aCIsImlzQWRtaW4iLCJ1c2VybmFtZSIsIml0ZW1Tb3VyY2UiLCJmb3JFYWNoIiwiayIsInVwZGF0ZUl0ZW0iLCJpIiwidG9Mb3dlckNhc2UiLCJudW1iZXIiLCJjb3VudCJdLCJtYXBwaW5ncyI6IkNBSUEsU0FBV0EsR0FDUCxZQUVBLElBQUlDLElBQ0EsWUFDQSxZQUNBLGVBQ0EsV0FDQSxpQkFDQSxRQUNBLFlBQ0Esc0JBQ0EsZUFJQUMsRUFBTUYsRUFBUUcsT0FBTyxNQUFPRixFQUVoQ0MsR0FBSUUsUUFBUSx3QkFBeUIsU0FBVUMsR0FDM0NBLEVBQXNCQyxnQkFBaUIsTUFzQjVDTjtDQ3pDSCxTQUFXQSxHQUNQLFlBSUEsSUFBSU8sR0FBaUJQLEVBQVFHLE9BQU8sb0JBRXBDSyxRQUFPRCxlQUFpQkMsT0FBT0QsaUJBQzNCRSxTQUFVLGdDQUNWQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsYUFBYyxHQUNkQyxZQUFhLElBR2pCTixFQUFlTyxTQUFTLFlBQWEsV0FFakNDLEtBQUtDLE1BQVEsWUFBYSxLQUFNLFdBVTVCLFFBQVNDLE1BVFQsR0FBSUMsRUFtQkosT0FsQklWLFFBQU9XLGVBQ1BELEVBQVVWLE9BQU9XLGVBaUJiRixlQUFnQkEsT0FJaENWLEVB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dXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8zLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRJbmplY3QgPSBbXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3BsYXRmb3JtJyxcclxuICAgICAgICAnYXV0aGVudGljYXRpb24nLFxyXG4gICAgICAgICduZ1dlYicsXHJcbiAgICAgICAgJ25nTWVzc2FnZScsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxyXG4gICAgICAgICd0ZXh0QW5ndWxhcidcclxuICAgIF07XHJcbiAgICAvL3dpbmRvdy5nbG9iZVBhdGg9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG5cclxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgZGVwZW5kSW5qZWN0KTtcclxuXHJcbiAgICBhcHAuY29uZmlnKFsnY2ZwTG9hZGluZ0JhclByb3ZpZGVyJywgZnVuY3Rpb24gKGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xyXG4gICAgICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlU3Bpbm5lciA9IGZhbHNlO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIC8vYXBwLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24gKCRwcm92aWRlKSB7XHJcbiAgICAvLyAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0ZW1wbGF0ZUNhY2hlJywgWyckaHR0cCcsICckZGVsZWdhdGUnLCAnJGluamVjdG9yJywgZnVuY3Rpb24gKCRodHRwLCAkZGVsZWdhdGUsICRpbmplY3Rvcikge1xyXG4gICAgLy8gICAgICAgICRkZWxlZ2F0ZS5sb2FkZWRUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIC8vICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgLy8gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAvLyAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAvLyAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICRpbmplY3Rvci5nZXQoJyRjb21waWxlJykoci5kYXRhKTtcclxuICAgIC8vICAgICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgICAgfTtcclxuICAgIC8vICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgLy8gICAgfV0pO1xyXG4gICAgLy99XSk7XHJcbiAgICAvL1xyXG4gICAgLy9hcHAucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkY29tcGlsZSkge1xyXG4gICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUubG9hZGVkVGVtcGxhdGVVcmwoJy90ZW1wbGF0ZS9uZy10ZW1wbGF0ZS5odG1sJyk7XHJcbiAgICAvL31dKTtcclxuXHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbi8vYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnYXBwJ10pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTEuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy9jdXJyZW50bHkgdGhpcyBhdXRoIGZ1bmN0aW9uIGlzIG5vdCB1c2luZy5cclxuXHJcbiAgICB2YXIgYXV0aGVudGljYXRpb24gPSBhbmd1bGFyLm1vZHVsZSgnYXV0aGVudGljYXRpb24nLCBbXSk7XHJcblxyXG4gICAgd2luZG93LmF1dGhlbnRpY2F0aW9uID0gd2luZG93LmF1dGhlbnRpY2F0aW9uIHx8IHtcclxuICAgICAgICB0b2tlbktleTogJ2F1dGhlbnRpY2F0aW9uLmtleS5lZHUub25saW5lJyxcclxuICAgICAgICBhdXRoUmVxdWlyZTogJycsXHJcbiAgICAgICAgYXV0aFN1Y2Nlc3M6ICcnLFxyXG4gICAgICAgIGxvZ2luU3VjY2VzczogJycsXHJcbiAgICAgICAgbG9naW5GYWlsZWQ6ICcnXHJcbiAgICB9O1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLnByb3ZpZGVyKCd0b2tlbkF1dGgnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyRxJywgZnVuY3Rpb24gKCRpbmplY3RvciwgJHEpIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2U7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gbG9naW4obmFtZSwgcGFzc3dvcmQpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVG9rZW5BdXRoKCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VG9rZW5BdXRoKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuS2V5ID0gc3RvcmFnZS5nZXRJdGVtKHdpbmRvdy5hdXRoZW50aWNhdGlvbi50b2tlbktleSk7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UodG9rZW5LZXkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7Y2hlY2tUb2tlbkF1dGg6IGNoZWNrVG9rZW5BdXRofTtcclxuICAgICAgICB9XTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLmZhY3RvcnkoJ3Rva2VuQXV0aEh0dHBJbnRlcmNlcHRvcicsIFsnJHJvb3RTY29wZScsICckcScsICd0b2tlbkF1dGgnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsIHRva2VuQXV0aCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrVG9rZW5BdXRoKCkge1xyXG4gICAgICAgICAgICBpZiAodG9rZW5BdXRoLmNoZWNrVG9rZW5BdXRoKCkpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCh3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KHdpbmRvdy5hdXRoZW50aWNhdGlvbi5hdXRoUmVxdWlyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbnRlcmNlcHRvciA9IHtcclxuICAgICAgICAgICAgJ3JlcXVlc3QnOiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZXNwb25zZUVycm9yJzogZnVuY3Rpb24gKHJlamVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIGF1dGhlbnRpY2F0aW9uLmNvbmZpZyhmdW5jdGlvbiAoJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgIC8vJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgndG9rZW5BdXRoSHR0cEludGVyY2VwdG9yJyk7XHJcbiAgICB9KTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEzLlxyXG4gKi9cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJywgW10pLnZhbHVlKCd0b3BpY0l0ZW1Tb3VyY2UnLCBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b3BpYzogJ0phdmFzY3JpcHQnLFxyXG4gICAgICAgICAgICBsaVN0eWxlOiAnYmdfbGcgc3BhbjMnLFxyXG4gICAgICAgICAgICB1aVNyZWY6ICdqYXZhc2NyaXB0JyxcclxuICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1sZWFmJyxcclxuICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9waWM6ICdBbmd1bGFyanMnLFxyXG4gICAgICAgICAgICBsaVN0eWxlOiAnYmdfbGIgc3BhbjInLFxyXG4gICAgICAgICAgICB1aVNyZWY6ICdhbmd1bGFyanMnLFxyXG4gICAgICAgICAgICBpU3R5bGU6ICdpY29uLXR3aXR0ZXInLFxyXG4gICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b3BpYzogJ05vZGVKUycsXHJcbiAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19seSBzcGFuMicsXHJcbiAgICAgICAgICAgIHVpU3JlZjogJ25vZGVqcycsXHJcbiAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tYmVha2VyJyxcclxuICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9waWM6ICdDIycsXHJcbiAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sbyBzcGFuMycsXHJcbiAgICAgICAgICAgIHVpU3JlZjogJ2NzaGFycCcsXHJcbiAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tbGVtb24nLFxyXG4gICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b3BpYzogJ01vbmdvREInLFxyXG4gICAgICAgICAgICBsaVN0eWxlOiAnYmdfbHMnLFxyXG4gICAgICAgICAgICB1aVNyZWY6ICdtb25nb2RiJyxcclxuICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi1jbG91ZCcsXHJcbiAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRvcGljOiAnU1FMJyxcclxuICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xvJyxcclxuICAgICAgICAgICAgdWlTcmVmOiAnc3FsJyxcclxuICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10aC1sYXJnZScsXHJcbiAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEwLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwbGF0Zm9ybScsIFtdKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICAgICAgICAvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgndG9waWMnKTtcclxuXHJcbiAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RvcGljJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy90b3BpYycsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy90b3BpYydcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2FydGljbGUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FydGljbGUvOmlkJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2FydGljbGUnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdhYm91dCcsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYWJvdXQnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvYWJvdXQnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdjYXRlZ29yeScsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvdG9waWMvOmNhdGVnb3J5JywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3RvcGljL3RvcGljLWNhdGVnb3J5J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnZWRpdC1hcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9lZGl0LWFydGljbGUnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvZWRpdC1hcnRpY2xlJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgndXBkYXRlLWFydGljbGUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2VkaXQtYXJ0aWNsZS86aWQnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvZWRpdC1hcnRpY2xlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG59KShhbmd1bGFyKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8yLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwbGF0Zm9ybScpLmZhY3RvcnkoJ2NvbW1vblNlcnZpY2UnLCBbZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBZWVlZTU1ERChzdHIpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc3RyKSxcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBkLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHNlcCA9ICctJztcclxuICAgICAgICAgICAgaWYgKGRhdGUgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZSA9ICcwJyArIGRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZC5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgaWYgKG1vbnRoIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gJzAnICsgbW9udGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKSArIHNlcCArIG1vbnRoICsgc2VwICsgZGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFlZWVlNTUREOiBZWVlZTU1ERFxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTIuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtJykuZmFjdG9yeSgnZGlhbG9nU2VydmljZScsIFsnJG1vZGFsJywgJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCRtb2RhbCwgJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdE9wdGlvbnMudGVtcGxhdGUgPSAkdGVtcGxhdGVDYWNoZS5nZXQob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKGRlZmF1bHRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kYWxJbnN0YW5jZS5yZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzIvMy5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCdhcnRpY2xlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRzdGF0ZSkge1xyXG5cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2FydGljbGUvJyArICRzdGF0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNhcnRpY2xlQ29udGVudCcpLmFwcGVuZChyZXMuZGF0YS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzIvMi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIsIHZhbGlkYXRvcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vSlNIaW50IFcxMTdcclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ2VkaXRBcnRpY2xlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJ3RvcGljSXRlbVNvdXJjZScsICdkaWFsb2dTZXJ2aWNlJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIHRvcGljSXRlbVNvdXJjZSwgZGlhbG9nU2VydmljZSwgJHN0YXRlKSB7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcnkgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2ZlciA9IFt7bmFtZTogJ+WOn+WImycsIHZhbHVlOiBmYWxzZX0sIHtuYW1lOiAn6L2s6L29JywgdmFsdWU6IHRydWV9XTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q2F0ZWdvcnkgPSB0b3BpY0l0ZW1Tb3VyY2VbMF07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0VHJhbnNmZXIgPSAkc2NvcGUudHJhbnNmZXJbMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVQb3N0KHN0cikge1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gdmFsaWRhdG9yLmVzY2FwZSh2YWxpZGF0b3IudHJpbShzdHIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0b3IudHJpbShzdHIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gc2FmZVBvc3QoJHNjb3BlLnNlbGVjdENhdGVnb3J5LnVpU3JlZik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNmZXIgPSBzYWZlUG9zdCgkc2NvcGUuc2VsZWN0VHJhbnNmZXIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gc2FmZVBvc3QoJHNjb3BlLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc2FmZVBvc3QoJHNjb3BlLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGl0bGUgfHwgIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvc2F2ZUFydGljbGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiAkc2NvcGUuX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXI6IHRyYW5zZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ3NhdmUtb2suaHRtbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoJHN0YXRlLnBhcmFtcyAmJiAkc3RhdGUucGFyYW1zLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOWPguaVsOWtmOWcqO+8jOWImeS4unVwZGF0ZSFcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hcnRpY2xlLycgKyAkc3RhdGUucGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5faWQgPSByZXMuZGF0YS5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50ID0gcmVzLmRhdGEuY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gcmVzLmRhdGEudGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RDYXRlZ29yeSA9IF8uZmluZCh0b3BpY0l0ZW1Tb3VyY2UsIHt1aVNyZWY6IHJlcy5kYXRhLmNhdGVnb3J5fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RUcmFuc2ZlciA9IF8uZmluZCgkc2NvcGUudHJhbnNmZXIsIHt2YWx1ZTogcmVzLmRhdGEudHJhbnNmZXJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1dKTtcclxufSkoYW5ndWxhciwgdmFsaWRhdG9yKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcignbWFpbmZyYW1lQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCkge1xyXG4gICAgICAgICAgICAvLyRzY29wZS51c2VybmFtZSA9ICd3ZWxjb21lJztcclxuICAgICAgICAgICAgLy8kc2NvcGUuaXNBdXRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hdXRoL2F1dGhVc2VyJykudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0F1dGggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0FkbWluID0gcmVzLmRhdGEuaXNBZG1pbjtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcm5hbWUgPSByZXMuZGF0YS51c2VybmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMS84LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ3RvcGljQ2F0ZWdvcnlDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJHN0YXRlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJHN0YXRlKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90b3BpY3MvJyArICRzdGF0ZS5wYXJhbXMuY2F0ZWdvcnkpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pdGVtU291cmNlID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMy5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogaW5kZXggd2lsbCB1c2UgdGhpcyBjb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ3RvcGljQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJ3RvcGljSXRlbVNvdXJjZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIHRvcGljSXRlbVNvdXJjZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHRvcGljSXRlbVNvdXJjZTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3RvcGljcy9ncm91cHRvcGljcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICRzY29wZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2gocmVzcG9uc2UuZGF0YSwgZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZUl0ZW0gPSBfLmZpbmQoJHNjb3BlLmRhdGEsIGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gay5faWQudG9Mb3dlckNhc2UoKSA9PT0gaS50b3BpYy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW0ubnVtYmVyID0gay5jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=