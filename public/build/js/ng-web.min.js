!function(n){"use strict";var a=["ngAnimate","ui.router","ui.bootstrap","platform","authentication","ngWeb","ngMessage","angular-loading-bar","textAngular"],i=n.module("app",a);i.config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}])}(angular);
!function(n){"use strict";var t=n.module("authentication",[]);window.authentication=window.authentication||{tokenKey:"authentication.key.edu.online",authRequire:"",authSuccess:"",loginSuccess:"",loginFailed:""},t.provider("tokenAuth",function(){this.$get=["$injector","$q",function(){function n(){}var t;return window.localStorage&&(t=window.localStorage),{checkTokenAuth:n}}]}),t.factory("tokenAuthHttpInterceptor",["$rootScope","$q","tokenAuth",function(n,t,e){var o={request:function(n){return n},response:function(n){return n},requestError:function(n){return n},responseError:function(n){return n}};return o}]),t.config(function(){})}(angular);
!function(l){"use strict";l.module("ngWeb",[]).value("topicItemSource",[{topic:"Javascript",liStyle:"bg_lg span3",uiSref:"javascript",iStyle:"icon-leaf",spanStyle:"label label-success"},{topic:"Angularjs",liStyle:"bg_lb span2",uiSref:"angularjs",iStyle:"icon-twitter",spanStyle:"label label-success"},{topic:"NodeJS",liStyle:"bg_ly span2",uiSref:"nodejs",iStyle:"icon-beaker",spanStyle:"label label-success"},{topic:"C#",liStyle:"bg_lo span3",uiSref:"csharp",iStyle:"icon-lemon",spanStyle:"label label-success"},{topic:"MongoDB",liStyle:"bg_ls",uiSref:"mongodb",iStyle:"icon-cloud",spanStyle:"label label-success"},{topic:"SQL",liStyle:"bg_lo",uiSref:"sql",iStyle:"icon-th-large",spanStyle:"label label-success"}])}(angular);
!function(t){"use strict";t.module("platform",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e){e.otherwise("topic"),t.state("topic",{url:"/topic",templateUrl:"/templates/topic"}).state("article",{url:"/article/:id",templateUrl:"/templates/article"}).state("about",{url:"/about",templateUrl:"/templates/about"}).state("category",{url:"/topic/:category",templateUrl:"/templates/topic/topic-category"}).state("edit-article",{url:"/edit-article",templateUrl:"/templates/edit-article"}).state("update-article",{url:"/edit-article/:id",templateUrl:"/templates/edit-article"})}])}(angular);
!function(t){"use strict";t.module("platform").factory("commonService",[function(){function t(t){var e=new Date(t),n=e.getDate(),r="-";10>n&&(n="0"+n);var a=e.getMonth()+1;return 10>a&&(a="0"+a),e.getFullYear()+r+a+r+n}return{YYYYMMDD:t}}])}(angular);
!function(t){"use strict";t.module("platform").factory("dialogService",["$modal","$templateCache",function(e,a){return{show:function(r){var o={};t.copy(r,o),o.template=a.get(r.template);var n=e.open(o);return n.result}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("articleController",["$scope","$http","$state",function(t,n,a){n.get("/api/article/"+a.params.id).then(function(t){200===t.status&&t.data&&$("#articleContent").append(t.data.content)})}])}(angular);
!function(t,e){"use strict";t.module("ngWeb").controller("editArticleController",["$scope","$http","topicItemSource","dialogService","$state",function(t,a,n,r,i){function o(){t.content="",t.title="",t.selectCategory=n[0],t.selectTransfer=t.transfer[0]}function c(t){return e.trim(t)}t.category=n,t.transfer=[{name:"原创",value:!1},{name:"转载",value:!0}],t.submit=function(){var e=c(t.selectCategory.uiSref),n=c(t.selectTransfer.value),i=c(t.title),l=c(t.content);i&&l&&a({method:"post",url:"/api/saveArticle",data:{_id:t._id,category:e,title:i,content:l,transfer:n}}).then(function(t){200===t.status&&t.data&&(o(),r.show({template:"save-ok.html"}))})},t.clear=function(){o()},i.params&&i.params.id?a.get("/api/article/"+i.params.id).then(function(e){200===e.status&&e.data&&(t._id=e.data._id,t.content=e.data.content,t.title=e.data.title,t.selectCategory=_.find(n,{uiSref:e.data.category}),t.selectTransfer=_.find(t.transfer,{value:e.data.transfer}))}):o()}])}(angular,validator);
!function(e){"use strict";e.module("ngWeb").controller("mainframeController",["$scope","$http","$rootScope",function(e,t,s){s.systemUser={username:"welcome",isAuth:!1},t.get("/api/auth/authUser").then(function(e){200!==e.status||e.data.err||(s.systemUser={username:e.data.username,isAdmin:e.data.isAdmin,isAuth:!0})})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicCategoryController",["$scope","$http","$state",function(t,o,e){o.get("/api/topics/"+e.params.category).then(function(o){200===o.status&&(t.itemSource=o.data)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicController",["$scope","$http","topicItemSource",function(t,o,n){t.data=n,o.get("/api/topics/grouptopics").then(function(o){if(200===o.status){{t.data}_.forEach(o.data,function(o){var n=_.find(t.data,function(t){return o._id.toLowerCase()===t.topic.toLowerCase()});n&&(n.number=o.count)})}})}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLmpzIiwibmctd2ViLmpzIiwicGxhdGZvcm0uanMiLCJjb21tb24tc2VydmljZS5qcyIsImRpYWxvZy1zZXJ2aWNlLmpzIiwiYXJ0aWNsZS1jb250cm9sbGVyLmpzIiwiZWRpdC1hcnRpY2xlLWNvbnRyb2xsZXIuanMiLCJtYWluZnJhbWUtY29udHJvbGxlci5qcyIsInRvcGljLWNhdGVnb3J5LWNvbnRyb2xsZXIuanMiLCJ0b3BpYy1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJkZXBlbmRJbmplY3QiLCJhcHAiLCJtb2R1bGUiLCJjb25maWciLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJpbmNsdWRlU3Bpbm5lciIsImF1dGhlbnRpY2F0aW9uIiwid2luZG93IiwidG9rZW5LZXkiLCJhdXRoUmVxdWlyZSIsImF1dGhTdWNjZXNzIiwibG9naW5TdWNjZXNzIiwibG9naW5GYWlsZWQiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiY2hlY2tUb2tlbkF1dGgiLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZmFjdG9yeSIsIiRyb290U2NvcGUiLCIkcSIsInRva2VuQXV0aCIsImludGVyY2VwdG9yIiwicmVxdWVzdCIsInJlc3BvbnNlIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVzcG9uc2VFcnJvciIsInZhbHVlIiwidG9waWMiLCJsaVN0eWxlIiwidWlTcmVmIiwiaVN0eWxlIiwic3BhblN0eWxlIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiWVlZWU1NREQiLCJzdHIiLCJkIiwiRGF0ZSIsImRhdGUiLCJnZXREYXRlIiwic2VwIiwibW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiJG1vZGFsIiwiJHRlbXBsYXRlQ2FjaGUiLCJzaG93Iiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiY29weSIsInRlbXBsYXRlIiwiZ2V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJyZXN1bHQiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkc3RhdGUiLCJwYXJhbXMiLCJpZCIsInRoZW4iLCJyZXMiLCJzdGF0dXMiLCJkYXRhIiwiJCIsImFwcGVuZCIsImNvbnRlbnQiLCJ2YWxpZGF0b3IiLCJ0b3BpY0l0ZW1Tb3VyY2UiLCJkaWFsb2dTZXJ2aWNlIiwiaW5pdCIsInRpdGxlIiwic2VsZWN0Q2F0ZWdvcnkiLCJzZWxlY3RUcmFuc2ZlciIsInRyYW5zZmVyIiwic2FmZVBvc3QiLCJ0cmltIiwiY2F0ZWdvcnkiLCJuYW1lIiwic3VibWl0IiwibWV0aG9kIiwiX2lkIiwiY2xlYXIiLCJfIiwiZmluZCIsInN5c3RlbVVzZXIiLCJ1c2VybmFtZSIsImlzQXV0aCIsImVyciIsImlzQWRtaW4iLCJpdGVtU291cmNlIiwiZm9yRWFjaCIsImsiLCJ1cGRhdGVJdGVtIiwiaSIsInRvTG93ZXJDYXNlIiwibnVtYmVyIiwiY291bnQiXSwibWFwcGluZ3MiOiJDQUlBLFNBQVdBLEdBQ1AsWUFFQSxJQUFJQyxJQUNBLFlBQ0EsWUFDQSxlQUNBLFdBQ0EsaUJBQ0EsUUFDQSxZQUNBLHNCQUNBLGVBR0FDLEVBQU1GLEVBQVFHLE9BQU8sTUFBT0YsRUFFaENDLEdBQUlFLFFBQVEsd0JBQXlCLFNBQVVDLEdBQzNDQSxFQUFzQkMsZ0JBQWlCLE1Bc0I1Q047Q0N4Q0gsU0FBV0EsR0FDUCxZQUlBLElBQUlPLEdBQWlCUCxFQUFRRyxPQUFPLG9CQUVwQ0ssUUFBT0QsZUFBaUJDLE9BQU9ELGlCQUMzQkUsU0FBVSxnQ0FDVkMsWUFBYSxHQUNiQyxZQUFhLEdBQ2JDLGFBQWMsR0FDZEMsWUFBYSxJQUdqQk4sRUFBZU8sU0FBUyxZQUFhLFdBRWpDQyxLQUFLQyxNQUFRLFlBQWEsS0FBTSxXQVU1QixRQUFTQyxNQVRULEdBQUlDLEVBbUJKLE9BbEJJVixRQUFPVyxlQUNQRCxFQUFVVixPQUFPVyxlQWlC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RXZDRixLQUNBQSxFQUFXRyxPQUFTSixFQUFFSyxnQkFPL0MxRyIsImZpbGUiOiJuZy13ZWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzMuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlcGVuZEluamVjdCA9IFtcclxuICAgICAgICAnbmdBbmltYXRlJyxcclxuICAgICAgICAndWkucm91dGVyJyxcclxuICAgICAgICAndWkuYm9vdHN0cmFwJyxcclxuICAgICAgICAncGxhdGZvcm0nLFxyXG4gICAgICAgICdhdXRoZW50aWNhdGlvbicsXHJcbiAgICAgICAgJ25nV2ViJyxcclxuICAgICAgICAnbmdNZXNzYWdlJyxcclxuICAgICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXHJcbiAgICAgICAgJ3RleHRBbmd1bGFyJ1xyXG4gICAgXTtcclxuXHJcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIGRlcGVuZEluamVjdCk7XHJcblxyXG4gICAgYXBwLmNvbmZpZyhbJ2NmcExvYWRpbmdCYXJQcm92aWRlcicsIGZ1bmN0aW9uIChjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcclxuICAgICAgICBjZnBMb2FkaW5nQmFyUHJvdmlkZXIuaW5jbHVkZVNwaW5uZXIgPSBmYWxzZTtcclxuICAgIH1dKTtcclxuXHJcbiAgICAvL2FwcC5jb25maWcoWyckcHJvdmlkZScsIGZ1bmN0aW9uICgkcHJvdmlkZSkge1xyXG4gICAgLy8gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckdGVtcGxhdGVDYWNoZScsIFsnJGh0dHAnLCAnJGRlbGVnYXRlJywgJyRpbmplY3RvcicsIGZ1bmN0aW9uICgkaHR0cCwgJGRlbGVnYXRlLCAkaW5qZWN0b3IpIHtcclxuICAgIC8vICAgICAgICAkZGVsZWdhdGUubG9hZGVkVGVtcGxhdGVVcmwgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAvLyAgICAgICAgICAgICRodHRwKHtcclxuICAgIC8vICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgLy8gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAkaW5qZWN0b3IuZ2V0KCckY29tcGlsZScpKHIuZGF0YSk7XHJcbiAgICAvLyAgICAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgICAgIH07XHJcbiAgICAvLyAgICAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcclxuICAgIC8vICAgIH1dKTtcclxuICAgIC8vfV0pO1xyXG4gICAgLy9cclxuICAgIC8vYXBwLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgJyRodHRwJywgJyRjb21waWxlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlLCAkaHR0cCwgJGNvbXBpbGUpIHtcclxuICAgIC8vICAgICR0ZW1wbGF0ZUNhY2hlLmxvYWRlZFRlbXBsYXRlVXJsKCcvdGVtcGxhdGUvbmctdGVtcGxhdGUuaHRtbCcpO1xyXG4gICAgLy99XSk7XHJcblxyXG5cclxufSkoYW5ndWxhcik7XHJcblxyXG4vL2FuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LCBbJ2FwcCddKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzExLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vY3VycmVudGx5IHRoaXMgYXV0aCBmdW5jdGlvbiBpcyBub3QgdXNpbmcuXHJcblxyXG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uID0gYW5ndWxhci5tb2R1bGUoJ2F1dGhlbnRpY2F0aW9uJywgW10pO1xyXG5cclxuICAgIHdpbmRvdy5hdXRoZW50aWNhdGlvbiA9IHdpbmRvdy5hdXRoZW50aWNhdGlvbiB8fCB7XHJcbiAgICAgICAgdG9rZW5LZXk6ICdhdXRoZW50aWNhdGlvbi5rZXkuZWR1Lm9ubGluZScsXHJcbiAgICAgICAgYXV0aFJlcXVpcmU6ICcnLFxyXG4gICAgICAgIGF1dGhTdWNjZXNzOiAnJyxcclxuICAgICAgICBsb2dpblN1Y2Nlc3M6ICcnLFxyXG4gICAgICAgIGxvZ2luRmFpbGVkOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5wcm92aWRlcigndG9rZW5BdXRoJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckcScsIGZ1bmN0aW9uICgkaW5qZWN0b3IsICRxKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlO1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5hbWUsIHBhc3N3b3JkKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b2tlbktleSA9IHN0b3JhZ2UuZ2V0SXRlbSh3aW5kb3cuYXV0aGVudGljYXRpb24udG9rZW5LZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHRva2VuS2V5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge2NoZWNrVG9rZW5BdXRoOiBjaGVja1Rva2VuQXV0aH07XHJcbiAgICAgICAgfV07XHJcbiAgICB9KTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5mYWN0b3J5KCd0b2tlbkF1dGhIdHRwSW50ZXJjZXB0b3InLCBbJyRyb290U2NvcGUnLCAnJHEnLCAndG9rZW5BdXRoJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCB0b2tlbkF1dGgpIHtcclxuICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgaWYgKHRva2VuQXV0aC5jaGVja1Rva2VuQXV0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3Qod2luZG93LmF1dGhlbnRpY2F0aW9uLmF1dGhTdWNjZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCh3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFJlcXVpcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZXF1ZXN0RXJyb3InOiBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncmVzcG9uc2VFcnJvcic6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbnRlcmNlcHRvcjtcclxuICAgIH1dKTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5jb25maWcoZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAvLyRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ3Rva2VuQXV0aEh0dHBJbnRlcmNlcHRvcicpO1xyXG4gICAgfSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMy5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicsIFtdKS52YWx1ZSgndG9waWNJdGVtU291cmNlJywgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9waWM6ICdKYXZhc2NyaXB0JyxcclxuICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xnIHNwYW4zJyxcclxuICAgICAgICAgICAgdWlTcmVmOiAnamF2YXNjcmlwdCcsXHJcbiAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tbGVhZicsXHJcbiAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRvcGljOiAnQW5ndWxhcmpzJyxcclxuICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xiIHNwYW4yJyxcclxuICAgICAgICAgICAgdWlTcmVmOiAnYW5ndWxhcmpzJyxcclxuICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10d2l0dGVyJyxcclxuICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9waWM6ICdOb2RlSlMnLFxyXG4gICAgICAgICAgICBsaVN0eWxlOiAnYmdfbHkgc3BhbjInLFxyXG4gICAgICAgICAgICB1aVNyZWY6ICdub2RlanMnLFxyXG4gICAgICAgICAgICBpU3R5bGU6ICdpY29uLWJlYWtlcicsXHJcbiAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRvcGljOiAnQyMnLFxyXG4gICAgICAgICAgICBsaVN0eWxlOiAnYmdfbG8gc3BhbjMnLFxyXG4gICAgICAgICAgICB1aVNyZWY6ICdjc2hhcnAnLFxyXG4gICAgICAgICAgICBpU3R5bGU6ICdpY29uLWxlbW9uJyxcclxuICAgICAgICAgICAgc3BhblN0eWxlOiAnbGFiZWwgbGFiZWwtc3VjY2VzcydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9waWM6ICdNb25nb0RCJyxcclxuICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xzJyxcclxuICAgICAgICAgICAgdWlTcmVmOiAnbW9uZ29kYicsXHJcbiAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tY2xvdWQnLFxyXG4gICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b3BpYzogJ1NRTCcsXHJcbiAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sbycsXHJcbiAgICAgICAgICAgIHVpU3JlZjogJ3NxbCcsXHJcbiAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tdGgtbGFyZ2UnLFxyXG4gICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMC5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm0nLCBbXSkuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJ3RvcGljJyk7XHJcblxyXG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b3BpYycsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvdG9waWMnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvdG9waWMnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdhcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcnRpY2xlLzppZCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9hcnRpY2xlJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2Fib3V0JywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2Fib3V0J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnY2F0ZWdvcnknLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3RvcGljLzpjYXRlZ29yeScsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy90b3BpYy90b3BpYy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2VkaXQtYXJ0aWNsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZWRpdC1hcnRpY2xlJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2VkaXQtYXJ0aWNsZSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3VwZGF0ZS1hcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9lZGl0LWFydGljbGUvOmlkJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2VkaXQtYXJ0aWNsZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxufSkoYW5ndWxhcik7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm0nKS5mYWN0b3J5KCdjb21tb25TZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gWVlZWU1NREQoc3RyKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHN0ciksXHJcbiAgICAgICAgICAgICAgICBkYXRlID0gZC5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICBzZXAgPSAnLSc7XHJcbiAgICAgICAgICAgIGlmIChkYXRlIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIGRhdGUgPSAnMCcgKyBkYXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBtb250aCA9IGQuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGlmIChtb250aCA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9ICcwJyArIG1vbnRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyBzZXAgKyBtb250aCArIHNlcCArIGRhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBZWVlZTU1ERDogWVlZWU1NRERcclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEyLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwbGF0Zm9ybScpLmZhY3RvcnkoJ2RpYWxvZ1NlcnZpY2UnLCBbJyRtb2RhbCcsICckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkbW9kYWwsICR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRPcHRpb25zLnRlbXBsYXRlID0gJHRlbXBsYXRlQ2FjaGUuZ2V0KG9wdGlvbnMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3BlbihkZWZhdWx0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGFsSW5zdGFuY2UucmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8yLzMuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcignYXJ0aWNsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcclxuXHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hcnRpY2xlLycgKyAkc3RhdGUucGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjYXJ0aWNsZUNvbnRlbnQnKS5hcHBlbmQocmVzLmRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8yLzIuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyLCB2YWxpZGF0b3IpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvL0pTSGludCBXMTE3XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCdlZGl0QXJ0aWNsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICd0b3BpY0l0ZW1Tb3VyY2UnLCAnZGlhbG9nU2VydmljZScsICckc3RhdGUnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCB0b3BpY0l0ZW1Tb3VyY2UsIGRpYWxvZ1NlcnZpY2UsICRzdGF0ZSkge1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3J5ID0gdG9waWNJdGVtU291cmNlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXIgPSBbe25hbWU6ICfljp/liJsnLCB2YWx1ZTogZmFsc2V9LCB7bmFtZTogJ+i9rOi9vScsIHZhbHVlOiB0cnVlfV07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgICRzY29wZS50aXRsZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdENhdGVnb3J5ID0gdG9waWNJdGVtU291cmNlWzBdO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdFRyYW5zZmVyID0gJHNjb3BlLnRyYW5zZmVyWzBdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzYWZlUG9zdChzdHIpIHtcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIHZhbGlkYXRvci5lc2NhcGUodmFsaWRhdG9yLnRyaW0oc3RyKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdG9yLnRyaW0oc3RyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9IHNhZmVQb3N0KCRzY29wZS5zZWxlY3RDYXRlZ29yeS51aVNyZWYpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gc2FmZVBvc3QoJHNjb3BlLnNlbGVjdFRyYW5zZmVyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IHNhZmVQb3N0KCRzY29wZS50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHNhZmVQb3N0KCRzY29wZS5jb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRpdGxlIHx8ICFjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL3NhdmVBcnRpY2xlJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogJHNjb3BlLl9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyOiB0cmFuc2ZlclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3coe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdzYXZlLW9rLmh0bWwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCRzdGF0ZS5wYXJhbXMgJiYgJHN0YXRlLnBhcmFtcy5pZCkge1xyXG4gICAgICAgICAgICAgICAgLy/lpoLmnpzlj4LmlbDlrZjlnKjvvIzliJnkuLp1cGRhdGUhXHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvYXJ0aWNsZS8nICsgJHN0YXRlLnBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuX2lkID0gcmVzLmRhdGEuX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudCA9IHJlcy5kYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50aXRsZSA9IHJlcy5kYXRhLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q2F0ZWdvcnkgPSBfLmZpbmQodG9waWNJdGVtU291cmNlLCB7dWlTcmVmOiByZXMuZGF0YS5jYXRlZ29yeX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0VHJhbnNmZXIgPSBfLmZpbmQoJHNjb3BlLnRyYW5zZmVyLCB7dmFsdWU6IHJlcy5kYXRhLnRyYW5zZmVyfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XSk7XHJcbn0pKGFuZ3VsYXIsIHZhbGlkYXRvcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEzLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ21haW5mcmFtZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckcm9vdFNjb3BlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICAvLyRzY29wZS51c2VybmFtZSA9ICd3ZWxjb21lJztcclxuICAgICAgICAgICAgLy8kc2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyRzY29wZS5pc0F1dGggPSBmYWxzZTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5zeXN0ZW1Vc2VyID0ge1xyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6ICd3ZWxjb21lJyxcclxuICAgICAgICAgICAgICAgIGlzQXV0aDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9hdXRoL2F1dGhVc2VyJykudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmICFyZXMuZGF0YS5lcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS5pc0F1dGggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLmlzQWRtaW4gPSByZXMuZGF0YS5pc0FkbWluO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnVzZXJuYW1lID0gcmVzLmRhdGEudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zeXN0ZW1Vc2VyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVzLmRhdGEudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRtaW46IHJlcy5kYXRhLmlzQWRtaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXV0aDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzEvOC5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCd0b3BpY0NhdGVnb3J5Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdG9waWNzLycgKyAkc3RhdGUucGFyYW1zLmNhdGVnb3J5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbVNvdXJjZSA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIGluZGV4IHdpbGwgdXNlIHRoaXMgY29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCd0b3BpY0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICd0b3BpY0l0ZW1Tb3VyY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCB0b3BpY0l0ZW1Tb3VyY2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90b3BpY3MvZ3JvdXB0b3BpY3MnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAkc2NvcGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLmRhdGEsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVJdGVtID0gXy5maW5kKCRzY29wZS5kYXRhLCBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsuX2lkLnRvTG93ZXJDYXNlKCkgPT09IGkudG9waWMudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJdGVtLm51bWJlciA9IGsuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9