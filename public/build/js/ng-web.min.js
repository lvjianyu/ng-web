!function(n){"use strict";var a=["ngAnimate","ui.router","ui.bootstrap","platform","authentication","ngWeb","ngMessage","angular-loading-bar","textAngular"],i=n.module("app",a);i.config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}])}(angular);
!function(l){"use strict";l.module("ngWeb",[]).value("topicItemSource",[{topic:"Javascript",liStyle:"bg_lg span3",uiSref:"javascript",iStyle:"icon-leaf",spanStyle:"label label-success"},{topic:"Angularjs",liStyle:"bg_lb span2",uiSref:"angularjs",iStyle:"icon-twitter",spanStyle:"label label-success"},{topic:"NodeJS",liStyle:"bg_ly span2",uiSref:"nodejs",iStyle:"icon-beaker",spanStyle:"label label-success"},{topic:"C#",liStyle:"bg_lo span3",uiSref:"csharp",iStyle:"icon-lemon",spanStyle:"label label-success"},{topic:"MongoDB",liStyle:"bg_ls",uiSref:"mongodb",iStyle:"icon-cloud",spanStyle:"label label-success"},{topic:"SQL",liStyle:"bg_lo",uiSref:"sql",iStyle:"icon-th-large",spanStyle:"label label-success"}])}(angular);
!function(t){"use strict";var e=t.module("platform",[]);e.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e){e.otherwise("topic"),t.state("topic",{url:"/topic",templateUrl:"/templates/topic"}).state("article",{url:"/article/:id",templateUrl:"/templates/article"}).state("about",{url:"/about",templateUrl:"/templates/about"}).state("category",{url:"/topic/:category",templateUrl:"/templates/topic/topic-category"}).state("edit-article",{url:"/edit-article",templateUrl:"/templates/edit-article"}).state("update-article",{url:"/edit-article/:id",templateUrl:"/templates/edit-article"})}]),e.run(["$rootScope","$state","dialogService",function(){}])}(angular);
!function(n){"use strict";var t=n.module("authentication",[]);window.authentication=window.authentication||{tokenKey:"authentication.key.edu.online",authRequire:"",authSuccess:"",loginSuccess:"",loginFailed:""},t.provider("tokenAuth",function(){this.$get=["$injector","$q",function(){function n(){}var t;return window.localStorage&&(t=window.localStorage),{checkTokenAuth:n}}]}),t.factory("tokenAuthHttpInterceptor",["$rootScope","$q","tokenAuth",function(n,t,e){var o={request:function(n){return n},response:function(n){return n},requestError:function(n){return n},responseError:function(n){return n}};return o}]),t.config(function(){})}(angular);
!function(t){"use strict";t.module("platform").factory("commonService",[function(){function t(t){var e=new Date(t),n=e.getDate(),r="-";10>n&&(n="0"+n);var a=e.getMonth()+1;return 10>a&&(a="0"+a),e.getFullYear()+r+a+r+n}return{YYYYMMDD:t}}])}(angular);
!function(t){"use strict";t.module("platform").factory("dialogService",["$modal","$templateCache",function(e,a){return{show:function(r){var o={};t.copy(r,o),o.template=a.get(r.template);var n=e.open(o);return n.result}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("articleItem",["$templateCache","$state","commonService",function(t,e,i){return{restrict:"EA",scope:{item:"=",isAdmin:"@"},template:t.get("article-item.html"),link:function(t){t.item.href=e.href("article",{id:t.item._id}),t.item.formatUpdateAt=i.YYYYMMDD(t.item.updateAt),t.item.formatTransfer=t.item.transfer?"转载":"原创"},controller:["$scope",function(t){t.articleEdit=function(t){e.go("update-article",{id:t._id})}}]}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("layoutHeader",["$templateCache","dialogService",function(t,e){return{restrict:"EA",scope:{},template:t.get("layout-header.html"),controller:function(t){t.login=function(){e.show({template:"login-template.html"})}}}}]).directive("layoutFooter",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-footer.html")}}]).directive("layoutSidebar",["$templateCache","$state","topicItemSource",function(t,e,r){return{restrict:"EA",template:t.get("layout-sidebar.html"),link:function(t){_.forEach(r,function(t){t.href=e.href("category",{category:t.uiSref})}),t.layoutSidebarItemSource=r}}}]).directive("layoutContent",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-content.html")}}]).directive("layoutSearch",["$templateCache",function(t){return{restrict:"EA",template:t.get("layout-search.html")}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("topicCategory",["$templateCache",function(t){return{restrict:"EA",scope:{itemSource:"="},template:t.get("topic-category.html"),link:function(){}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").directive("topicItems",["$templateCache","topicItemSource","$state",function(t,e,c){return{restrict:"EA",template:t.get("topic-items.html"),link:function(t){_.forEach(e,function(t){t.href=c.href("category",{category:t.uiSref})}),t.itemSource=e}}}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("articleController",["$scope","$http","$state",function(t,n,a){n.get("/api/article/"+a.params.id).then(function(t){200===t.status&&t.data&&$("#articleContent").append(t.data.content)})}])}(angular);
!function(t,e){"use strict";t.module("ngWeb").controller("editArticleController",["$scope","$http","topicItemSource","dialogService","$state",function(t,a,n,r,i){function o(){t.content="",t.title="",t.selectCategory=n[0],t.selectTransfer=t.transfer[0]}function c(t){return e.trim(t)}t.category=n,t.transfer=[{name:"原创",value:!1},{name:"转载",value:!0}],t.submit=function(){var e=c(t.selectCategory.uiSref),n=c(t.selectTransfer.value),i=c(t.title),l=c(t.content);i&&l&&a({method:"post",url:"/api/saveArticle",data:{_id:t._id,category:e,title:i,content:l,transfer:n}}).then(function(t){200===t.status&&t.data&&(o(),r.show({template:"save-ok.html"}))})},t.clear=function(){o()},i.params&&i.params.id?a.get("/api/article/"+i.params.id).then(function(e){200===e.status&&e.data&&(t._id=e.data._id,t.content=e.data.content,t.title=e.data.title,t.selectCategory=_.find(n,{uiSref:e.data.category}),t.selectTransfer=_.find(t.transfer,{value:e.data.transfer}))}):o()}])}(angular,validator);
!function(e){"use strict";e.module("ngWeb").controller("mainframeController",["$scope","$http",function(e,t){e.username="welcome",t.get("/api/auth/authUser").then(function(t){200===t.status&&t.data&&(e.isAdmin=t.data.isAdmin,e.username=t.data.username)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicCategoryController",["$scope","$http","$state",function(t,o,e){o.get("/api/topics/"+e.params.category).then(function(o){200===o.status&&(t.itemSource=o.data)})}])}(angular);
!function(t){"use strict";t.module("ngWeb").controller("topicController",["$scope","$http","topicItemSource",function(t,o,n){t.data=n,o.get("/api/topics/grouptopics").then(function(o){if(200===o.status){{t.data}_.forEach(o.data,function(o){var n=_.find(t.data,function(t){return o._id.toLowerCase()===t.topic.toLowerCase()});n&&(n.number=o.count)})}})}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm5nLXdlYi5qcyIsInBsYXRmb3JtLmpzIiwiYXV0aGVudGljYXRpb24uanMiLCJjb21tb24tc2VydmljZS5qcyIsImRpYWxvZy1zZXJ2aWNlLmpzIiwiYXJ0aWNsZS1pdGVtLWRpcmVjdGl2ZS5qcyIsImxheW91dC1kaXJlY3RpdmUuanMiLCJ0b3BpYy1jYXRlZ29yeS1kaXJlY3RpdmUuanMiLCJ0b3BpYy1pdGVtLWRpcmVjdGl2ZS5qcyIsImFydGljbGUtY29udHJvbGxlci5qcyIsImVkaXQtYXJ0aWNsZS1jb250cm9sbGVyLmpzIiwibWFpbmZyYW1lLWNvbnRyb2xsZXIuanMiLCJ0b3BpYy1jYXRlZ29yeS1jb250cm9sbGVyLmpzIiwidG9waWMtY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwiZGVwZW5kSW5qZWN0IiwiYXBwIiwibW9kdWxlIiwiY29uZmlnIiwiY2ZwTG9hZGluZ0JhclByb3ZpZGVyIiwiaW5jbHVkZVNwaW5uZXIiLCJ2YWx1ZSIsInRvcGljIiwibGlTdHlsZSIsInVpU3JlZiIsImlTdHlsZSIsInNwYW5TdHlsZSIsInBsYXRmb3JtIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwicnVuIiwiYXV0aGVudGljYXRpb24iLCJ3aW5kb3ciLCJ0b2tlbktleSIsImF1dGhSZXF1aXJlIiwiYXV0aFN1Y2Nlc3MiLCJsb2dpblN1Y2Nlc3MiLCJsb2dpbkZhaWxlZCIsInByb3ZpZGVyIiwidGhpcyIsIiRnZXQiLCJjaGVja1Rva2VuQXV0aCIsInN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJmYWN0b3J5IiwiJHJvb3RTY29wZSIsIiRxIiwidG9rZW5BdXRoIiwiaW50ZXJjZXB0b3IiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJyZXF1ZXN0RXJyb3IiLCJyZWplY3Rpb24iLCJyZXNwb25zZUVycm9yIiwiWVlZWU1NREQiLCJzdHIiLCJkIiwiRGF0ZSIsImRhdGUiLCJnZXREYXRlIiwic2VwIiwibW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiJG1vZGFsIiwiJHRlbXBsYXRlQ2FjaGUiLCJzaG93Iiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiY29weSIsInRlbXBsYXRlIiwiZ2V0IiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJyZXN1bHQiLCJkaXJlY3RpdmUiLCIkc3RhdGUiLCJjb21tb25TZXJ2aWNlIiwicmVzdHJpY3QiLCJzY29wZSIsIml0ZW0iLCJpc0FkbWluIiwibGluayIsImhyZWYiLCJpZCIsIl9pZCIsImZvcm1hdFVwZGF0ZUF0IiwidXBkYXRlQXQiLCJmb3JtYXRUcmFuc2ZlciIsInRyYW5zZmVyIiwiY29udHJvbGxlciIsIiRzY29wZSIsImFydGljbGVFZGl0IiwiZ28iLCJkaWFsb2dTZXJ2aWNlIiwibG9naW4iLCJ0b3BpY0l0ZW1Tb3VyY2UiLCJfIiwiZm9yRWFjaCIsImsiLCJjYXRlZ29yeSIsImxheW91dFNpZGViYXJJdGVtU291cmNlIiwiaXRlbVNvdXJjZSIsIiRodHRwIiwicGFyYW1zIiwidGhlbiIsInJlcyIsInN0YXR1cyIsImRhdGEiLCIkIiwiYXBwZW5kIiwiY29udGVudCIsInZhbGlkYXRvciIsImluaXQiLCJ0aXRsZSIsInNlbGVjdENhdGVnb3J5Iiwic2VsZWN0VHJhbnNmZXIiLCJzYWZlUG9zdCIsInRyaW0iLCJuYW1lIiwic3VibWl0IiwibWV0aG9kIiwiY2xlYXIiLCJmaW5kIiwidXNlcm5hbWUiLCJ1cGRhdGVJdGVtIiwiaSIsInRvTG93ZXJDYXNlIiwibnVtYmVyIiwiY291bnQiXSwibWFwcGluZ3MiOiJDQUlBLFNBQVdBLEdBQ1AsWUFFQSxJQUFJQyxJQUNBLFlBQ0EsWUFDQSxlQUNBLFdBQ0EsaUJBQ0EsUUFDQSxZQUNBLHNCQUNBLGVBSUFDLEVBQU1GLEVBQVFHLE9BQU8sTUFBT0YsRUFFaENDLEdBQUlFLFFBQVEsd0JBQXlCLFNBQVVDLEdBQzNDQSxFQUFzQkMs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Q0FBLEVBQVdHLE9BQVM3QixFQUFFOEIsZ0JBTy9DdkgiLCJmaWxlIjoibmctd2ViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8zLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRJbmplY3QgPSBbXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3BsYXRmb3JtJyxcclxuICAgICAgICAnYXV0aGVudGljYXRpb24nLFxyXG4gICAgICAgICduZ1dlYicsXHJcbiAgICAgICAgJ25nTWVzc2FnZScsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxyXG4gICAgICAgICd0ZXh0QW5ndWxhcidcclxuICAgIF07XHJcbiAgICAvL3dpbmRvdy5nbG9iZVBhdGg9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG5cclxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgZGVwZW5kSW5qZWN0KTtcclxuXHJcbiAgICBhcHAuY29uZmlnKFsnY2ZwTG9hZGluZ0JhclByb3ZpZGVyJywgZnVuY3Rpb24gKGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xyXG4gICAgICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlU3Bpbm5lciA9IGZhbHNlO1xyXG4gICAgfV0pO1xyXG5cclxuICAgIC8vYXBwLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24gKCRwcm92aWRlKSB7XHJcbiAgICAvLyAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0ZW1wbGF0ZUNhY2hlJywgWyckaHR0cCcsICckZGVsZWdhdGUnLCAnJGluamVjdG9yJywgZnVuY3Rpb24gKCRodHRwLCAkZGVsZWdhdGUsICRpbmplY3Rvcikge1xyXG4gICAgLy8gICAgICAgICRkZWxlZ2F0ZS5sb2FkZWRUZW1wbGF0ZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIC8vICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgLy8gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAvLyAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAvLyAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICRpbmplY3Rvci5nZXQoJyRjb21waWxlJykoci5kYXRhKTtcclxuICAgIC8vICAgICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgICAgfTtcclxuICAgIC8vICAgICAgICByZXR1cm4gJGRlbGVnYXRlO1xyXG4gICAgLy8gICAgfV0pO1xyXG4gICAgLy99XSk7XHJcbiAgICAvL1xyXG4gICAgLy9hcHAucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCAnJGh0dHAnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkY29tcGlsZSkge1xyXG4gICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUubG9hZGVkVGVtcGxhdGVVcmwoJy90ZW1wbGF0ZS9uZy10ZW1wbGF0ZS5odG1sJyk7XHJcbiAgICAvL31dKTtcclxuXHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbi8vYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnYXBwJ10pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInLCBbXSlcclxuICAgICAgICAudmFsdWUoJ3RvcGljSXRlbVNvdXJjZScsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG9waWM6ICdKYXZhc2NyaXB0JyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sZyBzcGFuMycsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdqYXZhc2NyaXB0JyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tbGVhZicsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ0FuZ3VsYXJqcycsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbGIgc3BhbjInLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnYW5ndWxhcmpzJyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tdHdpdHRlcicsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b3BpYzogJ05vZGVKUycsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbHkgc3BhbjInLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnbm9kZWpzJyxcclxuICAgICAgICAgICAgICAgIGlTdHlsZTogJ2ljb24tYmVha2VyJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnQyMnLFxyXG4gICAgICAgICAgICAgICAgbGlTdHlsZTogJ2JnX2xvIHNwYW4zJyxcclxuICAgICAgICAgICAgICAgIHVpU3JlZjogJ2NzaGFycCcsXHJcbiAgICAgICAgICAgICAgICBpU3R5bGU6ICdpY29uLWxlbW9uJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnTW9uZ29EQicsXHJcbiAgICAgICAgICAgICAgICBsaVN0eWxlOiAnYmdfbHMnLFxyXG4gICAgICAgICAgICAgICAgdWlTcmVmOiAnbW9uZ29kYicsXHJcbiAgICAgICAgICAgICAgICBpU3R5bGU6ICdpY29uLWNsb3VkJyxcclxuICAgICAgICAgICAgICAgIHNwYW5TdHlsZTogJ2xhYmVsIGxhYmVsLXN1Y2Nlc3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAnU1FMJyxcclxuICAgICAgICAgICAgICAgIGxpU3R5bGU6ICdiZ19sbycsXHJcbiAgICAgICAgICAgICAgICB1aVNyZWY6ICdzcWwnLFxyXG4gICAgICAgICAgICAgICAgaVN0eWxlOiAnaWNvbi10aC1sYXJnZScsXHJcbiAgICAgICAgICAgICAgICBzcGFuU3R5bGU6ICdsYWJlbCBsYWJlbC1zdWNjZXNzJ1xyXG4gICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgLy8ucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciBsYXlvdXRIZWFkZXJIdG1sID1cclxuICAgICAgICAvLyAgICAgICAgJzxkaXYgc3R5bGU9XCJoZWlnaHQ6IDgxcHhcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxkaXYgaWQ9XCJ1c2VyLW5hdlwiIGNsYXNzPVwibmF2YmFyIG5hdmJhci1pbnZlcnNlXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPHVsIGNsYXNzPVwibmF2XCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDxsaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgIDxhIGhyZWY+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24tdXNlclwiPjwvaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIiBkYXRhLW5nLW1vZGVsPVwidXNlcm5hbWVcIj48L3NwYW4+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgICAgICA8L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDwvbGk+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDxsaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgIDxhIGhyZWYgbmctY2xpY2s9XCJsb2dpbigpXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uLWdpdGh1YlwiPjwvaT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5Mb2dpbjwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbi1naXRodWJcIj57e3VzZXJuYW1lfX08L2k+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDwvbGk+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPC91bD4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgIC8vICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciBsYXlvdXRGb290ZXJIdG1sID1cclxuICAgICAgICAvLyAgICAgICAgJzxkaXYgY2xhc3M9XCJyb3ctZmx1aWRcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxkaXYgaWQ9XCJmb290ZXJcIiBjbGFzcz1cInNwYW4xMlwiPiAnICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAyMDE0LTIwMTUgJmNvcHk7V2ViIGRlc2lnbiBieSAnICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL21pY3JvbHYvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+W21pY3JvbHZdPC9hPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIGZvcmsgbWUgb24gZ2l0aHViOicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbWljcm9sdi9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5bbWljcm9sdl08L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8L2Rpdj4nICtcclxuICAgICAgICAvLyAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICB2YXIgbGF5b3V0U2lkZWJhckh0bWwgPVxyXG4gICAgICAgIC8vICAgICAgICAnPGRpdiBpZD1cInNpZGViYXJcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxhIGNsYXNzPVwidmlzaWJsZS1waG9uZVwiIGhyZWYgdWktc3JlZj1cInRvcGljXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24taG9tZVwiPjwvaT4gRGFzaGJvYXJkJyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8dWw+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICA8bGkgZGF0YS1uZy1yZXBlYXQ9XCJpdGVtIGluIGxheW91dFNpZGViYXJJdGVtU291cmNlXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgPGEgZGF0YS1uZy1ocmVmPVwie3tpdGVtLmhyZWZ9fVwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb25cIiBkYXRhLW5nLWNsYXNzPVwiaXRlbS5pU3R5bGVcIj48L2k+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgICAgIDxzcGFuPiB7e2l0ZW0udG9waWN9fTwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICA8L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICA8L2xpPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPC91bD4nICtcclxuICAgICAgICAvLyAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICB2YXIgbGF5b3V0Q29udGVudEh0bWwgPVxyXG4gICAgICAgIC8vICAgICAgICAnPGRpdiBpZD1cImNvbnRlbnRcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxkaXYgaWQ9XCJjb250ZW50LWhlYWRlclwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgIDxkaXYgaWQ9XCJicmVhZGNydW1iXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDxhIHVpLXNyZWY9XCJpbmRleFwiIHRpdGxlPVwiR28gdG8gSG9tZVwiIGNsYXNzPVwidGlwLWJvdHRvbVwiPicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgICAgICAgICA8aSBjbGFzcz1cImljb24taG9tZVwiPjwvaT5Ib21lJyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8L2Rpdj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgIC8vICAgICAgICAnICAgPGRpdiB1aS12aWV3PjwvZGl2PicgK1xyXG4gICAgICAgIC8vICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgIHZhciB0b3BpY0l0ZW1IdG1sID1cclxuICAgICAgICAvLyAgICAgICAgJzx1bCBjbGFzcz1cInF1aWNrLWFjdGlvbnNcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDxsaSBkYXRhLW5nLWNsYXNzPVwiaXRlbS5saVN0eWxlXCIgZGF0YS1uZy1yZXBlYXQ9XCJpdGVtIGluIGl0ZW1Tb3VyY2VcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgIDxhIGRhdGEtbmctaHJlZj1cInt7aXRlbS5ocmVmfX1cIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICA8aSBkYXRhLW5nLWNsYXNzPVwiaXRlbS5pU3R5bGVcIj48L2k+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgICAgPHNwYW4gZGF0YS1uZy1zaG93PVwiaXRlbS5udW1iZXJcIiBjbGFzcz1cImxhYmVsIGxhYmVsLWltcG9ydGFudFwiPnt7aXRlbS5udW1iZXJ9fTwvc3Bhbj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICAgICAge3tpdGVtLnRvcGljfX0nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgIDwvYT4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgIDwvbGk+JyArXHJcbiAgICAgICAgLy8gICAgICAgICc8L3VsPic7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICB2YXIgbGF5b3V0U2VhcmNoSHRtbCA9XHJcbiAgICAgICAgLy8gICAgICAgICc8ZGl2IGlkPVwic2VhcmNoXCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8YSBocmVmIGRhdGEtdWktc3JlZj1cImFib3V0XCI+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0XCI+QWJvdXQgTWU8L3NwYW4+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8YSBocmVmIGRhdGEtbmctc2hvdz1cImlzQWRtaW5cIiBkYXRhLXVpLXNyZWY9XCJlZGl0LWFydGljbGVcIj4nICtcclxuICAgICAgICAvLyAgICAgICAgJyAgICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5Qb3N0IEFydGljbGU8L3NwYW4+JyArXHJcbiAgICAgICAgLy8gICAgICAgICcgICA8L2E+JyArXHJcbiAgICAgICAgLy8gICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdsYXlvdXQtaGVhZGVyLmh0bWwnLCBsYXlvdXRIZWFkZXJIdG1sKTtcclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1jb250ZW50Lmh0bWwnLCBsYXlvdXRDb250ZW50SHRtbCk7XHJcbiAgICAgICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdsYXlvdXQtZm9vdGVyLmh0bWwnLCBsYXlvdXRGb290ZXJIdG1sKTtcclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xheW91dC1zaWRlYmFyLmh0bWwnLCBsYXlvdXRTaWRlYmFySHRtbCk7XHJcbiAgICAgICAgLy8gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdsYXlvdXQtc2VhcmNoLmh0bWwnLCBsYXlvdXRTZWFyY2hIdG1sKTtcclxuICAgICAgICAvLyAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RvcGljLWl0ZW1zLmh0bWwnLCB0b3BpY0l0ZW1IdG1sKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vfV0pO1xyXG5cclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE0LzExLzEwLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbiAgICB2YXIgcGxhdGZvcm0gPSBhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm0nLCBbXSk7XHJcblxyXG4gICAgcGxhdGZvcm0uY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJ3RvcGljJyk7XHJcblxyXG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b3BpYycsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvdG9waWMnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvdG9waWMnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdhcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcnRpY2xlLzppZCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9hcnRpY2xlJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2Fib3V0JywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2Fib3V0J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnY2F0ZWdvcnknLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3RvcGljLzpjYXRlZ29yeScsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy90b3BpYy90b3BpYy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2VkaXQtYXJ0aWNsZScsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZWRpdC1hcnRpY2xlJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2VkaXQtYXJ0aWNsZSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3VwZGF0ZS1hcnRpY2xlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9lZGl0LWFydGljbGUvOmlkJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2VkaXQtYXJ0aWNsZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbiAgICBwbGF0Zm9ybS5ydW4oWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICdkaWFsb2dTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgZGlhbG9nU2VydmljZSkge1xyXG4gICAgICAgIC8vJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2dCwgbmV4dCwgY3VycmVudCkge1xyXG4gICAgICAgIC8vICAgIGRpYWxvZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coY3VycmVudCk7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2cobmV4dCk7XHJcbiAgICAgICAgLy99KTtcclxuICAgICAgICAvLyRyb290U2NvcGUuJG9uKCd3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFJlcXVpcmUnLCBmdW5jdGlvbiAoZXZ0LCBuZXh0LCBjdXJyZW50KSB7XHJcbiAgICAgICAgLy8gICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4gICAgICAgIC8vfSk7XHJcblxyXG4gICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTEuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGF1dGhlbnRpY2F0aW9uID0gYW5ndWxhci5tb2R1bGUoJ2F1dGhlbnRpY2F0aW9uJywgW10pO1xyXG5cclxuICAgIHdpbmRvdy5hdXRoZW50aWNhdGlvbiA9IHdpbmRvdy5hdXRoZW50aWNhdGlvbiB8fCB7XHJcbiAgICAgICAgdG9rZW5LZXk6ICdhdXRoZW50aWNhdGlvbi5rZXkuZWR1Lm9ubGluZScsXHJcbiAgICAgICAgYXV0aFJlcXVpcmU6ICcnLFxyXG4gICAgICAgIGF1dGhTdWNjZXNzOiAnJyxcclxuICAgICAgICBsb2dpblN1Y2Nlc3M6ICcnLFxyXG4gICAgICAgIGxvZ2luRmFpbGVkOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5wcm92aWRlcigndG9rZW5BdXRoJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckcScsIGZ1bmN0aW9uICgkaW5qZWN0b3IsICRxKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlO1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2luKG5hbWUsIHBhc3N3b3JkKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b2tlbktleSA9IHN0b3JhZ2UuZ2V0SXRlbSh3aW5kb3cuYXV0aGVudGljYXRpb24udG9rZW5LZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHRva2VuS2V5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge2NoZWNrVG9rZW5BdXRoOiBjaGVja1Rva2VuQXV0aH07XHJcbiAgICAgICAgfV07XHJcbiAgICB9KTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5mYWN0b3J5KCd0b2tlbkF1dGhIdHRwSW50ZXJjZXB0b3InLCBbJyRyb290U2NvcGUnLCAnJHEnLCAndG9rZW5BdXRoJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCB0b2tlbkF1dGgpIHtcclxuICAgICAgICBmdW5jdGlvbiBjaGVja1Rva2VuQXV0aCgpIHtcclxuICAgICAgICAgICAgaWYgKHRva2VuQXV0aC5jaGVja1Rva2VuQXV0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3Qod2luZG93LmF1dGhlbnRpY2F0aW9uLmF1dGhTdWNjZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCh3aW5kb3cuYXV0aGVudGljYXRpb24uYXV0aFJlcXVpcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSB7XHJcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZXF1ZXN0RXJyb3InOiBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncmVzcG9uc2VFcnJvcic6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBpbnRlcmNlcHRvcjtcclxuICAgIH1dKTtcclxuXHJcbiAgICBhdXRoZW50aWNhdGlvbi5jb25maWcoZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAvLyRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ3Rva2VuQXV0aEh0dHBJbnRlcmNlcHRvcicpO1xyXG4gICAgfSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8yLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwbGF0Zm9ybScpLmZhY3RvcnkoJ2NvbW1vblNlcnZpY2UnLCBbZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBZWVlZTU1ERChzdHIpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc3RyKSxcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBkLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHNlcCA9ICctJztcclxuICAgICAgICAgICAgaWYgKGRhdGUgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZSA9ICcwJyArIGRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZC5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgaWYgKG1vbnRoIDwgMTApIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gJzAnICsgbW9udGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKSArIHNlcCArIG1vbnRoICsgc2VwICsgZGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFlZWVlNTUREOiBZWVlZTU1ERFxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTIuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtJykuZmFjdG9yeSgnZGlhbG9nU2VydmljZScsIFsnJG1vZGFsJywgJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCRtb2RhbCwgJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdE9wdGlvbnMudGVtcGxhdGUgPSAkdGVtcGxhdGVDYWNoZS5nZXQob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKGRlZmF1bHRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kYWxJbnN0YW5jZS5yZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG4gICAgLy8uY29udHJvbGxlcignZGlhbG9nQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcclxuICAgIC8vXHQkc2NvcGUub2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL1x0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh7dHlwZTogdHJ1ZSwgZGF0YTogJHNjb3BlLmRhdGF9KTtcclxuICAgIC8vXHR9O1xyXG4gICAgLy9cdCRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL1x0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKHt0eXBlOiBmYWxzZX0pO1xyXG4gICAgLy9cdH07XHJcbiAgICAvL31dKTtcclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNS8xLzE0LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmRpcmVjdGl2ZSgnYXJ0aWNsZUl0ZW0nLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJyRzdGF0ZScsICdjb21tb25TZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsICRzdGF0ZSwgY29tbW9uU2VydmljZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06ICc9JyxcclxuICAgICAgICAgICAgICAgICAgICBpc0FkbWluOiAnQCdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcnRpY2xlLWl0ZW0uaHRtbCcpLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGUsIGF0dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uaHJlZiA9ICRzdGF0ZS5ocmVmKCdhcnRpY2xlJywge2lkOiBzY29wZS5pdGVtLl9pZH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uZm9ybWF0VXBkYXRlQXQgPSBjb21tb25TZXJ2aWNlLllZWVlNTUREKHNjb3BlLml0ZW0udXBkYXRlQXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uZm9ybWF0VHJhbnNmZXIgPSBzY29wZS5pdGVtLnRyYW5zZmVyID8gJ+i9rOi9vScgOiAn5Y6f5YibJztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXJ0aWNsZUVkaXQgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3VwZGF0ZS1hcnRpY2xlJywge2lkOiBpdGVtLl9pZH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTIvMjQuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdsYXlvdXRIZWFkZXInLCBbJyR0ZW1wbGF0ZUNhY2hlJywgJ2RpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsIGRpYWxvZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbGF5b3V0LWhlYWRlci5odG1sJyksXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoJHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3coe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdsb2dpbi10ZW1wbGF0ZS5odG1sJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2xheW91dEZvb3RlcicsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbGF5b3V0LWZvb3Rlci5odG1sJylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdsYXlvdXRTaWRlYmFyJywgWyckdGVtcGxhdGVDYWNoZScsICckc3RhdGUnLCAndG9waWNJdGVtU291cmNlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlLCAkc3RhdGUsIHRvcGljSXRlbVNvdXJjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdsYXlvdXQtc2lkZWJhci5odG1sJyksXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZSwgYXR0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRvcGljSXRlbVNvdXJjZSwgZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgay5ocmVmID0gJHN0YXRlLmhyZWYoJ2NhdGVnb3J5Jywge2NhdGVnb3J5OiBrLnVpU3JlZn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmxheW91dFNpZGViYXJJdGVtU291cmNlID0gdG9waWNJdGVtU291cmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2xheW91dENvbnRlbnQnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2xheW91dC1jb250ZW50Lmh0bWwnKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2xheW91dFNlYXJjaCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnbGF5b3V0LXNlYXJjaC5odG1sJylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMS8xNC5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5kaXJlY3RpdmUoJ3RvcGljQ2F0ZWdvcnknLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtU291cmNlOiAnPSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgndG9waWMtY2F0ZWdvcnkuaHRtbCcpLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZSwgYXR0KSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTIvMjMuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuZGlyZWN0aXZlKCd0b3BpY0l0ZW1zJywgWyckdGVtcGxhdGVDYWNoZScsICd0b3BpY0l0ZW1Tb3VyY2UnLCAnJHN0YXRlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUsIHRvcGljSXRlbVNvdXJjZSwgJHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ3RvcGljLWl0ZW1zLmh0bWwnKSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlLCBhdHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godG9waWNJdGVtU291cmNlLCBmdW5jdGlvbiAoaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrLmhyZWYgPSAkc3RhdGUuaHJlZignY2F0ZWdvcnknLCB7Y2F0ZWdvcnk6IGsudWlTcmVmfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaXRlbVNvdXJjZSA9IHRvcGljSXRlbVNvdXJjZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMi8zLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCduZ1dlYicpLmNvbnRyb2xsZXIoJ2FydGljbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJHN0YXRlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJHN0YXRlKSB7XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvYXJ0aWNsZS8nICsgJHN0YXRlLnBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2FydGljbGVDb250ZW50JykuYXBwZW5kKHJlcy5kYXRhLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTUvMi8yLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhciwgdmFsaWRhdG9yKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy9KU0hpbnQgVzExN1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nV2ViJykuY29udHJvbGxlcignZWRpdEFydGljbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAndG9waWNJdGVtU291cmNlJywgJ2RpYWxvZ1NlcnZpY2UnLCAnJHN0YXRlJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgdG9waWNJdGVtU291cmNlLCBkaWFsb2dTZXJ2aWNlLCAkc3RhdGUpIHtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yeSA9IHRvcGljSXRlbVNvdXJjZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyID0gW3tuYW1lOiAn5Y6f5YibJywgdmFsdWU6IGZhbHNlfSwge25hbWU6ICfovazovb0nLCB2YWx1ZTogdHJ1ZX1dO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAnJztcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RDYXRlZ29yeSA9IHRvcGljSXRlbVNvdXJjZVswXTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RUcmFuc2ZlciA9ICRzY29wZS50cmFuc2ZlclswXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2FmZVBvc3Qoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiB2YWxpZGF0b3IuZXNjYXBlKHZhbGlkYXRvci50cmltKHN0cikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRvci50cmltKHN0cik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSBzYWZlUG9zdCgkc2NvcGUuc2VsZWN0Q2F0ZWdvcnkudWlTcmVmKTtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2ZlciA9IHNhZmVQb3N0KCRzY29wZS5zZWxlY3RUcmFuc2Zlci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBzYWZlUG9zdCgkc2NvcGUudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzYWZlUG9zdCgkc2NvcGUuY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aXRsZSB8fCAhY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9zYXZlQXJ0aWNsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6ICRzY29wZS5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcjogdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnc2F2ZS1vay5odG1sJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkc3RhdGUucGFyYW1zICYmICRzdGF0ZS5wYXJhbXMuaWQpIHtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5Y+C5pWw5a2Y5Zyo77yM5YiZ5Li6dXBkYXRlIVxyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2FydGljbGUvJyArICRzdGF0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLl9pZCA9IHJlcy5kYXRhLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSByZXMuZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGl0bGUgPSByZXMuZGF0YS50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdENhdGVnb3J5ID0gXy5maW5kKHRvcGljSXRlbVNvdXJjZSwge3VpU3JlZjogcmVzLmRhdGEuY2F0ZWdvcnl9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdFRyYW5zZmVyID0gXy5maW5kKCRzY29wZS50cmFuc2Zlciwge3ZhbHVlOiByZXMuZGF0YS50cmFuc2Zlcn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfV0pO1xyXG59KShhbmd1bGFyLCB2YWxpZGF0b3IpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkuTHYgb24gMjAxNC8xMS8xMy5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCdtYWluZnJhbWVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VybmFtZSA9ICd3ZWxjb21lJztcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2F1dGgvYXV0aFVzZXInKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNBZG1pbiA9IHJlcy5kYXRhLmlzQWRtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJuYW1lID0gcmVzLmRhdGEudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1dKTtcclxufSkoYW5ndWxhcik7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keS5MdiBvbiAyMDE1LzEvOC5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCd0b3BpY0NhdGVnb3J5Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdG9waWNzLycgKyAkc3RhdGUucGFyYW1zLmNhdGVnb3J5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbVNvdXJjZSA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5Lkx2IG9uIDIwMTQvMTEvMTMuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIGluZGV4IHdpbGwgdXNlIHRoaXMgY29udHJvbGxlclxyXG4gICAgICovXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnbmdXZWInKS5jb250cm9sbGVyKCd0b3BpY0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICd0b3BpY0l0ZW1Tb3VyY2UnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCB0b3BpY0l0ZW1Tb3VyY2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSB0b3BpY0l0ZW1Tb3VyY2U7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90b3BpY3MvZ3JvdXB0b3BpY3MnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAkc2NvcGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJlc3BvbnNlLmRhdGEsIGZ1bmN0aW9uIChrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVJdGVtID0gXy5maW5kKCRzY29wZS5kYXRhLCBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsuX2lkLnRvTG93ZXJDYXNlKCkgPT09IGkudG9waWMudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJdGVtLm51bWJlciA9IGsuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfV0pO1xyXG5cclxufSkoYW5ndWxhcik7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9